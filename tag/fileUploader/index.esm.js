import{jsx as e,jsxs as t,Fragment as a}from"react/jsx-runtime";import{useRef as r,useEffect as n,useState as i}from"react";var l=function(){return l=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l.apply(this,arguments)};function s(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}function c(e,t,a,r){return new(a||(a=Promise))((function(n,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,s)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var a,r,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(n=l.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){l.label=i[1];break}if(6===i[0]&&l.label<n[1]){l.label=n[1],n=i;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(i);break}n[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{a=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function d(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,i=a.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return l}var u=function(t){var a=t.disabled,i=t.children,c=t.className,o=t.onClick,d=s(t,["disabled","children","className","onClick"]),u=r(null),f=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation()},v=function(e){e.preventDefault(),e.stopPropagation()},m=function(e){var r,n,i;e.preventDefault(),e.stopPropagation(),!a&&(null===(r=null==e?void 0:e.dataTransfer)||void 0===r?void 0:r.files)&&e.dataTransfer.files.length>0&&("function"==typeof t.handleDrop&&t.handleDrop(e.dataTransfer.files),(null===(n=null==e?void 0:e.dataTransfer)||void 0===n?void 0:n.items)?e.dataTransfer.items.clear():"function"==typeof(null===(i=null==e?void 0:e.dataTransfer)||void 0===i?void 0:i.clearData)&&e.dataTransfer.clearData())};return n((function(){var e=u.current;if(e)return e.addEventListener("dragenter",p),e.addEventListener("dragleave",v),e.addEventListener("dragover",f),e.addEventListener("drop",m),function(){e&&(e.removeEventListener("dragenter",p),e.removeEventListener("dragleave",v),e.removeEventListener("dragover",f),e.removeEventListener("drop",m))}})),e("div",l({"data-testid":d["data-testid"]?d["data-testid"]:void 0,className:"drag-drop ".concat(c),style:{display:"inline-block",position:"relative",width:"100%"},ref:u,onClick:function(){a||"function"!=typeof o||o()}},{children:i}))},f=function(a){var i=a.percentage,c=a.HasText,o=a.error,d=a.success,u=a.className,f=s(a,["percentage","HasText","error","success","className"]),p=r(null),v=r(null);n((function(){p.current&&(p.current.style.animationDelay="0",p.current.style.transition="stroke-dashoffset 0.2s linear",p.current.style.strokeDashoffset="".concat((100-i)/100*87+213),100===i&&v.current&&p.current&&(o?v.current.classList.add("error"):d&&v.current.classList.add("success")))}),[i,o,d]);return t("div",l({className:"loader-wrapper ".concat(u||""),"data-testid":f&&f["data-testid"]?f["data-testid"]:void 0},{children:[e("div",l({ref:v,className:"svg-container_circular ".concat(o?"error":d?"success":""),"data-testid":f&&f["data-testid"]?"".concat(f["data-testid"],"-svg-container"):void 0},{children:e("svg",l({className:"svg-content",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:e("path",{className:"circle-svg",ref:p,d:"M16 30C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2C23.732 2 30 8.26801 30 16C30 23.732 23.732 30 16 30Z",stroke:"rgb(0, 154, 204)",strokeWidth:"4"})}))})),c]}))},p=function(a){var i=a.percentage,c=a.HasText,o=a.error,d=a.success,u=a.className,f=s(a,["percentage","HasText","error","success","className"]),p=r(null),v=r(null);n((function(){p.current&&(p.current.style.animationDelay="0",p.current.style.transition="stroke-dashoffset 0.2s linear",p.current.style.strokeDashoffset="".concat((100-i)/100*135+165),100===i&&v.current&&p.current&&(o?v.current.classList.add("error"):d&&v.current.classList.add("success")))}),[i,o,d]);return t("div",l({className:"loader-wrapper ".concat(u||""),"data-testid":f&&f["data-testid"]?f["data-testid"]:void 0},{children:[e("div",l({className:"svg-container ".concat(function(){if(100!==i){if(o)return"error";if(d)return"success"}return""}()),"data-percentage":"".concat(i,"%"),ref:v,"data-testid":f&&f["data-testid"]?"".concat(f["data-testid"],"-svg-container"):void 0},{children:e("svg",l({className:"svg-content",width:v&&v.current&&"24px"===v.current.style.width?"32":"56",height:"32",viewBox:v&&v.current&&"24px"===v.current.style.width?"0 0 32 32":"0 0 56 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:e("path",{className:"oval-svg",ref:p,d:"M28 2H40C47.732 2 54 8.26801 54 16C54 23.732 47.732 30 40\n            30H28H16C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2H28Z",stroke:"rgb(0, 154, 204)",strokeWidth:"4",strokeLinecap:"round"})}))})),c]}))},v=function(a){var r=a.title,c=a.subtitle,o=a.spinner,u=a.percentage,v=void 0===u?{value:0,show:!1}:u,m=a.error,h=a.success,g=a.automatic,y=a.className,b=s(a,["title","subtitle","spinner","percentage","error","success","automatic","className"]),N=d(i(g?0:null),2),w=N[0],x=N[1];n((function(){var e;return g&&(e=setInterval((function(){x((function(e){return e<100?e+5:e}))}),250)),function(){clearInterval(e)}}));var k=function(){return r?t("div",l({className:"loader-text-wrapper"},{children:[e("span",l({className:"loader-title","data-testid":b&&b["data-testid"]?"".concat(b["data-testid"],"-title"):void 0},{children:r})),c&&e("span",l({className:"loader-subtitle","data-testid":b&&b["data-testid"]?"".concat(b["data-testid"],"-subtitle"):void 0},{children:c}))]})):null};return o?r?t("div",l({className:"loader-wrapper ".concat(y||""),"data-testid":b&&b["data-testid"]?b["data-testid"]:void 0},{children:[e("div",{className:"spinner","data-testid":b&&b["data-testid"]?"".concat(b["data-testid"],"-spinner"):void 0}),e(k,{})]})):e("div",{className:"spinner ".concat(y||""),"data-testid":b&&b["data-testid"]?"".concat(b["data-testid"],"-spinner"):void 0}):v.show?e(p,{className:y,percentage:g?w:v.value,HasText:e(k,{}),error:g?w>=95&&m:m,success:g?w>=95&&h:h,"data-testid":b&&b["data-testid"]?b["data-testid"]:null}):e(f,{className:y,percentage:g?w:v.value,HasText:e(k,{}),error:g?w>=95&&m:m,success:g?w>=95&&h:h,"data-testid":b&&b["data-testid"]?b["data-testid"]:null})},m=function(f){var p=f.small,m=f.secondary,h=f.multiple,g=f.dragAndDrop,y=f.fullWidth,b=f.id,N=f.label,w=f.className,x=f.formats,k=f.max,C=f.disabled,D=f.value,T=f.onChange,L=s(f,["small","secondary","multiple","dragAndDrop","fullWidth","id","label","className","formats","max","disabled","value","onChange"]),O=d(i(D||void 0),2),_=O[0],E=O[1],H=r(null);n((function(){(h&&(null==D?void 0:D.length)>0||D)&&E(D)}),[D,h]);var P=function(e){if(e&&e.length>0){var t=Array.from(e);if(h&&(null==_?void 0:_.length)>0){var a=_.map((function(e){return e.file}));a=a.concat(t),T(a)}else T(t)}},j=function(){H&&H.current&&H.current.click()},S=y?"_full":"",A=C?"_disabled":"";return t("div",l({className:"file-uploader-wrapper".concat((g?"_drag-drop":"")||(p?"_small":"")).concat(S).concat(A," ").concat(w||"")},{children:[N&&e("label",l({className:"caption mb1 ".concat(C?"disabled":""),htmlFor:b},{children:N})),g?e(u,l({"data-testid":L&&L["data-testid"]?"".concat(L["data-testid"],"-drag-and-drop"):"",className:"file-uploader-drag-and-drop",disabled:C,handleDrop:P,onClick:j},{children:e("span",{children:"Click or drag-and-drop files here to upload"})})):t("button",l({type:"button","data-testid":L&&L["data-testid"]?"".concat(L["data-testid"],"-upload-btn"):void 0,className:"".concat(m?"button-secondary":"button-primary").concat(p?"_small":"_large"),onClick:j,disabled:C},{children:["Add files",e("span",l({className:"material-icons right"},{children:"file_upload"}))]})),t("small",l({className:"file-uploader-helper-text ".concat(C?"disabled":"")},{children:["Max file size is ",k,"MB. Only ",x]})),e("input",{id:b,"data-testid":L&&L["data-testid"]?"".concat(L["data-testid"],"-input"):void 0,ref:H,type:"file",onChange:function(e){return c(void 0,void 0,void 0,(function(){var t,a;return o(this,(function(r){return e.target.files&&e.target.files.length>0&&(t=Array.from(e.target.files),h&&(null==_?void 0:_.length)>0?(a=(a=_.map((function(e){return e.file}))).concat(t),T(a)):T(t)),[2]}))}))},accept:x,disabled:C,multiple:h}),(!h&&D||h&&D&&D.length>0)&&e("div",l({className:"file-uploader-files-container mt2"},{children:h&&_&&_.length>0?_.map((function(r,n){return r&&t("div",l({className:"file-uploader-file-container"},{children:[t("div",l({className:"file-uploader-file".concat(r.error?"_error":"")},{children:[e("span",l({className:"file-uploader-file-name"},{children:r.file.name})),r.loading?e(v,{spinner:!0}):t(a,{children:[r.error&&e("span",l({className:"material-icons error"},{children:"error"})),e("button",l({type:"button","data-testid":L&&L["data-testid"]?"".concat(L["data-testid"],"-file-").concat(n,"-delete-btn"):"",onClick:function(){return function(e){if(h&&_.length>0){var t=_.map((function(e){return e.file}));t.splice(e,1),T(t)}}(n)},disabled:C},{children:e("span",l({className:"material-icons cancel"},{children:"cancel"}))}))]})]})),r.error&&e("small",l({className:"mt1"},{children:r.error}))]}),"file-".concat(n))})):_&&t("div",l({className:"file-uploader-file-container"},{children:[t("div",l({className:"file-uploader-file".concat(_.error?"_error":"")},{children:[e("span",l({className:"file-uploader-file-name"},{children:_.file.name}))," ",_.loading?e(v,{spinner:!0}):_.error?e("span",l({className:"material-icons error"},{children:"error"})):e("span",l({className:"material-icons check"},{children:"check_circle"}))]})),_.error&&e("small",{children:_.error})]}))}))]}))};export{m as default};
//# sourceMappingURL=index.esm.js.map
