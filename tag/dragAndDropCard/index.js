"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=o(t),r=o(n),i=function(){return i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(n[o[c]]=e[o[c]])}return n}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,c,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(e){c={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return i}var l=c.default.memo((function(n){var o=n.children,r=n.className,d=n.disabled,l=a(n,["children","className","disabled"]),u=f(),s=u.onToggleMenu,h=u.setDropdownButtonDimensions,p=u.showMenu,g=c.default.useRef(null);return t.useEffect((function(){if(g&&g.current){var e=g.current.getBoundingClientRect();e&&h({width:e.width,height:e.height})}}),[p]),e.jsx("div",i({className:"dropdown-button".concat(d?"_disabled":""," ").concat(r||""),onClick:s,ref:g},l,{children:o}))})),u=function(n){var o=n.className,d=n.children,l=a(n,["className","children"]),u=c.default.useRef(null),s=f(),h=s.showMenu,p=s.setDropdownMenuDimensions,g=s.position,m=s.dropdownRef,v=s.handleClickMenu;t.useEffect((function(){if(u&&u.current){var e=u.current.getBoundingClientRect();e&&p({width:e.width,height:e.height})}}),[h]);var w=e.jsx("div",i({ref:u,className:"dropdown-menu ".concat(h?"":"hidden"," ").concat(o||""),style:g,onClick:v},l,{children:d}));if(m&&m.current){var x=document.getElementById("root");return r.default.createPortal(w,m.current||x||document.body)}return null},s=c.default.createContext({}),h=function(n){var o=n.children,c=n.className,r=n.onChangeToggleMenu,l=n.itemsDivider,u=n.forceRefresh,h=n.defaultShow,f=n.keepShown,p=void 0!==f&&f,g=n.placement,m=void 0===g?"bottom":g,v=a(n,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),w=d(t.useState(!1),2),x=w[0],b=w[1],y=d(t.useState(u||0),2),j=y[0],N=y[1],C=d(t.useState({width:0,height:0}),2),M=C[0],k=C[1],_=d(t.useState({width:0,height:0}),2),S=_[0],D=_[1],O=t.useRef(null);t.useEffect((function(){void 0!==h&&h!==x&&b(h)}),[h]),t.useEffect((function(){u&&j!==u&&N(u)}),[u,j]);var E=function(e){e&&e.target&&O&&O.current&&"true"===O.current.getAttribute("data-show")&&!O.current.contains(e.target)&&(b(!1),"function"==typeof r&&r(!1))};t.useEffect((function(){return document.addEventListener("click",E),document.addEventListener("scroll",(function(){return N((function(e){return e++}))})),function(){document.removeEventListener("click",E),document.removeEventListener("scroll",(function(){return N((function(e){return e++}))}))}}),[]);var R=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},P=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},T=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},B=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},L=function(e){return"".concat(e,"px")},q=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},A=function(e){return"".concat(e,"px")},H=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},I=t.useMemo((function(){var e,t="",n=0;if(O&&O.current){var o=O.current.getBoundingClientRect();n=M.width<S.width?S.width:M.width;var c=document.body,r=c.clientHeight,i=c.clientWidth;switch(m){case"top":t=o.top-M.height-8<0?P(o.top,S.height):R(o.top,M.height),e=o.left+n>i?q(o.left,n,S.width):L(o.left);break;case"right":e=o.left+n+8>i?B(o.left,n):T(o.left,S.width),t=o.top+M.height>r?H(o.top,M.height,S.height):A(o.top);break;case"bottom":t=o.top+M.height+8>r?R(o.top,M.height):P(o.top,S.height),e=o.left+n>i?q(o.left,n,S.width):L(o.left);break;case"left":e=o.left-n-8<0?T(o.left,S.width):B(o.left,n),t=o.top+M.height>r?H(o.top,M.height,S.height):A(o.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[M,S]);return e.jsx(s.Provider,i({value:{showMenu:x,setDropdownMenuDimensions:k,setDropdownButtonDimensions:D,handleClickMenu:function(){p||(b(!1),"function"==typeof r&&r(!1))},itemsDivider:l,dropdownRef:O,onChangeToggleMenu:r,onToggleMenu:function(){b((function(e){return"function"==typeof r&&r(!e),!e}))},position:I}},{children:e.jsx("div",i({ref:O,className:"dropdown ".concat(c||""),"data-show":x},v,{children:o}))}))},f=function(){return t.useContext(s)};exports.DragAndDropCardHeader=function(t){var n=t.id,o=t.children,c=t.className,r=a(t,["id","children","className"]);return e.jsx("div",i({id:n||"",className:"card-header ".concat(c||"")},r,{children:o}))},exports.default=function(n){var o=n.id,c=n.children,r=n.className,s=n.options,f=n.placeholder,p=n.completed,g=n.draggable,m=n.active,v=a(n,["id","children","className","options","placeholder","completed","draggable","active"]),w=d(t.useState(!1),2),x=w[0],b=w[1];return s&&s.length>0&&g?e.jsxs("div",i({id:o||"",className:"card_drag-drop".concat(p?"_completed":""," ").concat(m?"active":""," ").concat(r||""),draggable:!0,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},v,{children:[c,e.jsxs(h,i({defaultShow:x,onChangeToggleMenu:b},{children:[e.jsx(l,i({"data-testid":v&&v["data-testid"]?"".concat(v["data-testid"],"-dropdown-btn"):void 0},{children:e.jsx("span",i({className:"material-icons"},{children:"more_vert"}))})),e.jsx(u,{children:e.jsx("ul",{children:s&&s.map((function(t,n){var o=t.label,c=t.onClick,r=t.id,d=a(t,["label","onClick","id"]);return e.jsx("li",i({id:r||"option-card-".concat(n),className:"dropdown-item",onClick:function(){"function"==typeof c&&c()},"data-testid":v&&v["data-testid"]?"".concat(v["data-testid"],"-dropdown-item-").concat(n):void 0},d,{children:o}),r||"option-card-".concat(n))}))})})]}))]})):f?e.jsx("div",i({id:o||"",className:"card_drag-drop_placeholder ".concat(r||"")},v,{children:c})):s&&s.length>0?e.jsx("div",i({id:o||"",className:"card_drag-drop_dropdown ".concat(r||"")},v,{children:e.jsxs(h,i({onChangeToggleMenu:b},{children:[e.jsxs(l,i({"data-testid":v&&v["data-testid"]?"".concat(v["data-testid"],"-dropdown-btn"):void 0},{children:[c,e.jsx("span",i({className:"material-icons"},{children:x?"arrow_drop_up":"arrow_drop_down"}))]})),e.jsx(u,i({style:{top:"inherit",left:"inherit"}},{children:e.jsx("ul",{children:s&&s.map((function(t,n){return e.jsx("li",i({className:"dropdown-item",onClick:function(){"function"==typeof t.onClick&&t.onClick()},"data-testid":v&&v["data-testid"]?"".concat(v["data-testid"],"-dropdown-item-").concat(n):void 0},{children:t.label}),"option-card-".concat(n))}))})}))]}))})):e.jsx("div",i({id:o||"",className:"card_drag-drop".concat(p?"_completed":""," ").concat(m?"active":""," ").concat(r||""),draggable:g},v,{children:c}))};
//# sourceMappingURL=index.js.map
