import{jsx as t,jsxs as e}from"react/jsx-runtime";import n,{useEffect as o,useContext as c,useState as r,useRef as i,useMemo as a}from"react";import d from"react-dom";var l=function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t},l.apply(this,arguments)};function u(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(n[o[c]]=t[o[c]])}return n}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,c,r=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(t){c={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return i}var s=n.memo((function(e){var c=e.children,r=e.className,i=e.disabled,a=u(e,["children","className","disabled"]),d=g(),h=d.onToggleMenu,s=d.setDropdownButtonDimensions,p=d.showMenu,f=n.useRef(null);return o((function(){if(f&&f.current){var t=f.current.getBoundingClientRect();t&&s({width:t.width,height:t.height})}}),[p]),t("div",l({className:"dropdown-button".concat(i?"_disabled":""," ").concat(r||""),onClick:h,ref:f},a,{children:c}))})),p=function(e){var c=e.className,r=e.children,i=u(e,["className","children"]),a=n.useRef(null),h=g(),s=h.showMenu,p=h.setDropdownMenuDimensions,f=h.position,m=h.dropdownRef,v=h.handleClickMenu;o((function(){if(a&&a.current){var t=a.current.getBoundingClientRect();t&&p({width:t.width,height:t.height})}}),[s]);var w=t("div",l({ref:a,className:"dropdown-menu ".concat(s?"":"hidden"," ").concat(c||""),style:f,onClick:v},i,{children:r}));if(m&&m.current){var b=document.getElementById("root");return d.createPortal(w,m.current||b||document.body)}return null},f=n.createContext({}),m=function(e){var n=e.children,c=e.className,d=e.onChangeToggleMenu,s=e.itemsDivider,p=e.forceRefresh,m=e.defaultShow,g=e.keepShown,v=void 0!==g&&g,w=e.placement,b=void 0===w?"bottom":w,y=u(e,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=h(r(!1),2),N=x[0],C=x[1],k=h(r(p||0),2),M=k[0],_=k[1],D=h(r({width:0,height:0}),2),O=D[0],R=D[1],S=h(r({width:0,height:0}),2),j=S[0],E=S[1],T=i(null);o((function(){void 0!==m&&m!==N&&C(m)}),[m]),o((function(){p&&M!==p&&_(p)}),[p,M]);var B=function(t){t&&t.target&&T&&T.current&&"true"===T.current.getAttribute("data-show")&&!T.current.contains(t.target)&&(C(!1),"function"==typeof d&&d(!1))};o((function(){return document.addEventListener("click",B),document.addEventListener("scroll",(function(){return _((function(t){return t++}))})),function(){document.removeEventListener("click",B),document.removeEventListener("scroll",(function(){return _((function(t){return t++}))}))}}),[]);var P=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},L=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},A=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},H=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},I=function(t){return"".concat(t,"px")},W=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},q=function(t){return"".concat(t,"px")},z=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},F=a((function(){var t,e="",n=0;if(T&&T.current){var o=T.current.getBoundingClientRect();n=O.width<j.width?j.width:O.width;var c=document.body,r=c.clientHeight,i=c.clientWidth;switch(b){case"top":e=o.top-O.height-8<0?L(o.top,j.height):P(o.top,O.height),t=o.left+n>i?W(o.left,n,j.width):I(o.left);break;case"right":t=o.left+n+8>i?H(o.left,n):A(o.left,j.width),e=o.top+O.height>r?z(o.top,O.height,j.height):q(o.top);break;case"bottom":e=o.top+O.height+8>r?P(o.top,O.height):L(o.top,j.height),t=o.left+n>i?W(o.left,n,j.width):I(o.left);break;case"left":t=o.left-n-8<0?A(o.left,j.width):H(o.left,n),e=o.top+O.height>r?z(o.top,O.height,j.height):q(o.top)}}return{left:t,top:e,width:"".concat(n,"px")}}),[O,j]);return t(f.Provider,l({value:{showMenu:N,setDropdownMenuDimensions:R,setDropdownButtonDimensions:E,handleClickMenu:function(){v||(C(!1),"function"==typeof d&&d(!1))},itemsDivider:s,dropdownRef:T,onChangeToggleMenu:d,onToggleMenu:function(){C((function(t){return"function"==typeof d&&d(!t),!t}))},position:F}},{children:t("div",l({ref:T,className:"dropdown ".concat(c||""),"data-show":N},y,{children:n}))}))},g=function(){return c(f)},v=function(e){var n=e.id,o=e.children,c=e.className,r=u(e,["id","children","className"]);return t("div",l({id:n||"",className:"card-header ".concat(c||"")},r,{children:o}))},w=function(n){var o=n.id,c=n.children,i=n.className,a=n.options,d=n.placeholder,f=n.completed,g=n.draggable,v=n.active,w=u(n,["id","children","className","options","placeholder","completed","draggable","active"]),b=h(r(!1),2),y=b[0],x=b[1];return a&&a.length>0&&g?e("div",l({id:o||"",className:"card_drag-drop".concat(f?"_completed":""," ").concat(v?"active":""," ").concat(i||""),draggable:!0,onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)}},w,{children:[c,e(m,l({defaultShow:y,onChangeToggleMenu:x},{children:[t(s,l({"data-testid":w&&w["data-testid"]?"".concat(w["data-testid"],"-dropdown-btn"):void 0},{children:t("span",l({className:"material-icons"},{children:"more_vert"}))})),t(p,{children:t("ul",{children:a&&a.map((function(e,n){var o=e.label,c=e.onClick,r=e.id,i=u(e,["label","onClick","id"]);return t("li",l({id:r||"option-card-".concat(n),className:"dropdown-item",onClick:function(){"function"==typeof c&&c()},"data-testid":w&&w["data-testid"]?"".concat(w["data-testid"],"-dropdown-item-").concat(n):void 0},i,{children:o}),r||"option-card-".concat(n))}))})})]}))]})):d?t("div",l({id:o||"",className:"card_drag-drop_placeholder ".concat(i||"")},w,{children:c})):a&&a.length>0?t("div",l({id:o||"",className:"card_drag-drop_dropdown ".concat(i||"")},w,{children:e(m,l({onChangeToggleMenu:x},{children:[e(s,l({"data-testid":w&&w["data-testid"]?"".concat(w["data-testid"],"-dropdown-btn"):void 0},{children:[c,t("span",l({className:"material-icons"},{children:y?"arrow_drop_up":"arrow_drop_down"}))]})),t(p,l({style:{top:"inherit",left:"inherit"}},{children:t("ul",{children:a&&a.map((function(e,n){return t("li",l({className:"dropdown-item",onClick:function(){"function"==typeof e.onClick&&e.onClick()},"data-testid":w&&w["data-testid"]?"".concat(w["data-testid"],"-dropdown-item-").concat(n):void 0},{children:e.label}),"option-card-".concat(n))}))})}))]}))})):t("div",l({id:o||"",className:"card_drag-drop".concat(f?"_completed":""," ").concat(v?"active":""," ").concat(i||""),draggable:g},w,{children:c}))};export{v as DragAndDropCardHeader,w as default};
//# sourceMappingURL=index.esm.js.map
