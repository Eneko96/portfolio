import{jsx as t}from"react/jsx-runtime";import e,{useEffect as n,useState as o,useRef as r,useMemo as c,useContext as i}from"react";import a from"react-dom";var u=function(){return u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},u.apply(this,arguments)};function l(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,c=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i}var d=e.memo((function(o){var r=o.children,c=o.className,i=o.disabled,a=l(o,["children","className","disabled"]),h=g(),d=h.onToggleMenu,f=h.setDropdownButtonDimensions,s=h.showMenu,p=e.useRef(null);return n((function(){if(p&&p.current){var t=p.current.getBoundingClientRect();t&&f({width:t.width,height:t.height})}}),[s]),t("div",u({className:"dropdown-button".concat(i?"_disabled":""," ").concat(c||""),onClick:d,ref:p},a,{children:r}))})),f=function(o){var r=o.className,c=o.children,i=l(o,["className","children"]),h=e.useRef(null),d=g(),f=d.showMenu,s=d.setDropdownMenuDimensions,p=d.position,m=d.dropdownRef,v=d.handleClickMenu;n((function(){if(h&&h.current){var t=h.current.getBoundingClientRect();t&&s({width:t.width,height:t.height})}}),[f]);var w=t("div",u({ref:h,className:"dropdown-menu ".concat(f?"":"hidden"," ").concat(r||""),style:p,onClick:v},i,{children:c}));if(m&&m.current){var y=document.getElementById("root");return a.createPortal(w,m.current||y||document.body)}return null},s=e.createContext({}),p=function(e){var i=e.children,a=e.className,d=e.onChangeToggleMenu,f=e.itemsDivider,p=e.forceRefresh,g=e.defaultShow,m=e.keepShown,v=void 0!==m&&m,w=e.placement,y=void 0===w?"bottom":w,b=l(e,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=h(o(!1),2),D=x[0],M=x[1],O=h(o(p||0),2),k=O[0],C=O[1],N=h(o({width:0,height:0}),2),R=N[0],S=N[1],j=h(o({width:0,height:0}),2),B=j[0],E=j[1],P=r(null);n((function(){void 0!==g&&g!==D&&M(g)}),[g]),n((function(){p&&k!==p&&C(p)}),[p,k]);var T=function(t){t&&t.target&&P&&P.current&&"true"===P.current.getAttribute("data-show")&&!P.current.contains(t.target)&&(M(!1),"function"==typeof d&&d(!1))};n((function(){return document.addEventListener("click",T),document.addEventListener("scroll",(function(){return C((function(t){return t++}))})),function(){document.removeEventListener("click",T),document.removeEventListener("scroll",(function(){return C((function(t){return t++}))}))}}),[]);var L=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},I=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},A=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},H=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},W=function(t){return"".concat(t,"px")},_=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},q=function(t){return"".concat(t,"px")},z=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},F=c((function(){var t,e="",n=0;if(P&&P.current){var o=P.current.getBoundingClientRect();n=R.width<B.width?B.width:R.width;var r=document.body,c=r.clientHeight,i=r.clientWidth;switch(y){case"top":e=o.top-R.height-8<0?I(o.top,B.height):L(o.top,R.height),t=o.left+n>i?_(o.left,n,B.width):W(o.left);break;case"right":t=o.left+n+8>i?H(o.left,n):A(o.left,B.width),e=o.top+R.height>c?z(o.top,R.height,B.height):q(o.top);break;case"bottom":e=o.top+R.height+8>c?L(o.top,R.height):I(o.top,B.height),t=o.left+n>i?_(o.left,n,B.width):W(o.left);break;case"left":t=o.left-n-8<0?A(o.left,B.width):H(o.left,n),e=o.top+R.height>c?z(o.top,R.height,B.height):q(o.top)}}return{left:t,top:e,width:"".concat(n,"px")}}),[R,B]);return t(s.Provider,u({value:{showMenu:D,setDropdownMenuDimensions:S,setDropdownButtonDimensions:E,handleClickMenu:function(){v||(M(!1),"function"==typeof d&&d(!1))},itemsDivider:f,dropdownRef:P,onChangeToggleMenu:d,onToggleMenu:function(){M((function(t){return"function"==typeof d&&d(!t),!t}))},position:F}},{children:t("div",u({ref:P,className:"dropdown ".concat(a||""),"data-show":D},b,{children:i}))}))},g=function(){return i(s)};export{d as DropdownButton,f as DropdownMenu,p as default,g as useDropdown};
//# sourceMappingURL=index.esm.js.map
