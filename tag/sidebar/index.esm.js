import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import c,{useEffect as r,useContext as o,useState as i,useRef as a,useMemo as l}from"react";import d from"react-dom";var u=function(){return u=Object.assign||function(e){for(var t,n=1,c=arguments.length;n<c;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)};function s(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(c=Object.getOwnPropertySymbols(e);r<c.length;r++)t.indexOf(c[r])<0&&Object.prototype.propertyIsEnumerable.call(e,c[r])&&(n[c[r]]=e[c[r]])}return n}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var c,r,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(c=o.next()).done;)i.push(c.value)}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}var f=function(t){var n=t.children,c=t.className,r=s(t,["children","className"]);return e("div",u({className:"sidebar-logo ".concat(c||"")},r,{children:n}))},p=c.memo((function(t){var n=t.children,o=t.className,i=t.disabled,a=s(t,["children","className","disabled"]),l=b(),d=l.onToggleMenu,h=l.setDropdownButtonDimensions,f=l.showMenu,p=c.useRef(null);return r((function(){if(p&&p.current){var e=p.current.getBoundingClientRect();e&&h({width:e.width,height:e.height})}}),[f]),e("div",u({className:"dropdown-button".concat(i?"_disabled":""," ").concat(o||""),onClick:d,ref:p},a,{children:n}))})),m=function(t){var n=t.className,o=t.children,i=s(t,["className","children"]),a=c.useRef(null),l=b(),h=l.showMenu,f=l.setDropdownMenuDimensions,p=l.position,m=l.dropdownRef,v=l.handleClickMenu;r((function(){if(a&&a.current){var e=a.current.getBoundingClientRect();e&&f({width:e.width,height:e.height})}}),[h]);var g=e("div",u({ref:a,className:"dropdown-menu ".concat(h?"":"hidden"," ").concat(n||""),style:p,onClick:v},i,{children:o}));if(m&&m.current){var w=document.getElementById("root");return d.createPortal(g,m.current||w||document.body)}return null},v=c.createContext({}),g=function(t){var n=t.children,c=t.className,o=t.onChangeToggleMenu,d=t.itemsDivider,f=t.forceRefresh,p=t.defaultShow,m=t.keepShown,g=void 0!==m&&m,b=t.placement,w=void 0===b?"bottom":b,y=s(t,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),N=h(i(!1),2),x=N[0],C=N[1],k=h(i(f||0),2),M=k[0],D=k[1],O=h(i({width:0,height:0}),2),S=O[0],R=O[1],_=h(i({width:0,height:0}),2),I=_[0],j=_[1],E=a(null);r((function(){void 0!==p&&p!==x&&C(p)}),[p]),r((function(){f&&M!==f&&D(f)}),[f,M]);var P=function(e){e&&e.target&&E&&E.current&&"true"===E.current.getAttribute("data-show")&&!E.current.contains(e.target)&&(C(!1),"function"==typeof o&&o(!1))};r((function(){return document.addEventListener("click",P),document.addEventListener("scroll",(function(){return D((function(e){return e++}))})),function(){document.removeEventListener("click",P),document.removeEventListener("scroll",(function(){return D((function(e){return e++}))}))}}),[]);var B=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},T=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},L=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},A=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},H=function(e){return"".concat(e,"px")},W=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},q=function(e){return"".concat(e,"px")},z=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},F=l((function(){var e,t="",n=0;if(E&&E.current){var c=E.current.getBoundingClientRect();n=S.width<I.width?I.width:S.width;var r=document.body,o=r.clientHeight,i=r.clientWidth;switch(w){case"top":t=c.top-S.height-8<0?T(c.top,I.height):B(c.top,S.height),e=c.left+n>i?W(c.left,n,I.width):H(c.left);break;case"right":e=c.left+n+8>i?A(c.left,n):L(c.left,I.width),t=c.top+S.height>o?z(c.top,S.height,I.height):q(c.top);break;case"bottom":t=c.top+S.height+8>o?B(c.top,S.height):T(c.top,I.height),e=c.left+n>i?W(c.left,n,I.width):H(c.left);break;case"left":e=c.left-n-8<0?L(c.left,I.width):A(c.left,n),t=c.top+S.height>o?z(c.top,S.height,I.height):q(c.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[S,I]);return e(v.Provider,u({value:{showMenu:x,setDropdownMenuDimensions:R,setDropdownButtonDimensions:j,handleClickMenu:function(){g||(C(!1),"function"==typeof o&&o(!1))},itemsDivider:d,dropdownRef:E,onChangeToggleMenu:o,onToggleMenu:function(){C((function(e){return"function"==typeof o&&o(!e),!e}))},position:F}},{children:e("div",u({ref:E,className:"dropdown ".concat(c||""),"data-show":x},y,{children:n}))}))},b=function(){return o(v)},w=function(c){var r=c.id,o=c.icon,i=c.label,a=c.dropdown,l=c.viewMore,d=c.href,h=c.disabled,f=c.className,v=c.onClick,b=c.children,w=s(c,["id","icon","label","dropdown","viewMore","href","disabled","className","onClick","children"]),y=C(),N=y.collapsed,x=y.selected,k=y.onClickItem,M=x===r,D=function(e){"function"==typeof v&&v(e),k(e)};return a?t(g,u({className:"sidebar-button_dropdown"},{children:[e(p,{children:t("div",u({id:r,className:"sidebar-button".concat(M?"_selected":"").concat(h?"_disabled":""," ").concat(f||""),onClick:D},w,{children:[o,!N&&t(n,{children:[i,!l&&e("span",u({className:"material-icons sidebar-button-arrow"},{children:"arrow_right"}))]})]}),r)}),e(m,{children:b})]})):t("a",u({id:r,className:"sidebar-button".concat(M?"_selected":"").concat(h?"_disabled":""," ").concat(f||""),href:d,onClick:D},w,{children:[o,!N&&e("span",{children:i})]}),r)},y=function(t){var n=t.children,c=t.className,r=s(t,["children","className"]);return C().collapsed?e("hr",u({className:"sidebar-divider"},r)):e("div",u({className:"sidebar-divider ".concat(c||"")},r,{children:n}))},N=c.createContext({}),x=function(n){var c=n.id,o=n.collapsed,a=n.children,l=n.defaultItemSelected,d=n.className,p=n.onClickSidebarItem,m=n.onCollapse,v=s(n,["id","collapsed","children","defaultItemSelected","className","onClickSidebarItem","onCollapse"]),g=h(i(o),2),b=g[0],w=g[1],y=h(i(l),2),x=y[0],C=y[1];r((function(){l&&l!==x&&C(l)}),[l,x]);var k;return e(N.Provider,u({value:{collapsed:b,selected:x,onClickItem:function(e){var t=e.currentTarget.id;C(t),"function"==typeof p&&(e.preventDefault(),p(t))}}},{children:t("div",u({id:c,className:"sidebar".concat(b?"_collapsed":""," ").concat(d||"")},v,{children:[function(){if(a&&a.length){var e=a.find((function(e){return e&&e.type===f}));if(e)return e}return null}(),e("button",u({type:"button","data-testid":v&&v["data-testid"]?"".concat(v["data-testid"],"-collapsed-btn"):void 0,className:"sidebar-collapsed-button",onClick:function(){"function"==typeof m&&m(!b),w(!b)}},{children:e("span",u({className:"material-icons"},{children:b?"menu":"menu_open"}))}),"sidebar-collapsed-btn"),(k=[],a&&(a.length?a.forEach((function(e){e&&e.type!==f&&k.push(e)})):a.type!==f&&k.push(a)),k)]}))}))},C=function(){return o(N)};export{w as SidebarButton,y as SidebarDivider,f as SidebarLogo,x as default,C as useSidebar};
//# sourceMappingURL=index.esm.js.map
