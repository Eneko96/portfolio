{"version":3,"file":"index.js","sources":["../../src/components/tooltip/tooltip.tsx"],"sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\ntype TooltipPosition = 'top' | 'bottom' | 'left' | 'right';\ninterface TooltipProps {\n  id?: string;\n  /**\n   *  Is a reference for parent element\n   */\n  parentRef: React.RefObject<HTMLElement>;\n  /**\n   * Apply diferent styles for tooltip\n   */\n  className?: string;\n  renderAsPortal?: boolean;\n  placement?: TooltipPosition;\n  [others: string]: any;\n}\n\nconst Tooltip: React.FC<TooltipProps> = (props) => {\n  const {parentRef, className, children, id, renderAsPortal, placement = 'bottom', ...rest} = props;\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const [show, setShow] = useState(false);\n  const [position, setPosition] = useState<DOMRect | undefined>(undefined);\n  const [placementSt, setPlacementSt] = useState(placement);\n  useEffect(() => {\n    if (parentRef && parentRef.current) {\n      const parent = parentRef.current;\n      if (parent) {\n        parent.onmouseenter = () => setShow(true);\n        parent.onmouseleave = () => (show ? setShow(false) : undefined);\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (show) {\n      const _position = calculateTooltipPosition();\n      setPosition(_position?.position);\n      setPlacementSt(_position?.placement || placement);\n    }\n  }, [show]);\n\n  const topPosition = (parentRect: DOMRect, tooltipRect: DOMRect) => {\n    if (renderAsPortal) {\n      return {\n        top: `calc(${parentRect.top}px - ${tooltipRect.height}px - var(--unit))`,\n        left: `calc(${parentRect.left}px + ${parentRect.width / 2}px - ${tooltipRect.width / 2}px)`,\n      };\n    }\n    return {\n      top: `calc(-1 * var(--unit) - ${tooltipRect.height}px)`,\n      left: `calc(50% - ${tooltipRect.width / 2}px)`,\n    };\n  };\n  const bottomPosition = (parentRect: DOMRect, tooltipRect: DOMRect) => {\n    if (renderAsPortal) {\n      return {\n        top: `calc(${parentRect.top}px + ${parentRect.height}px + var(--unit))`,\n        left: `calc(${parentRect.left}px + ${parentRect.width / 2}px - ${tooltipRect.width / 2}px)`,\n      };\n    }\n    return {\n      top: 'calc(100% + var(--unit))',\n      left: `calc(50% - ${tooltipRect.width / 2}px)`,\n    };\n  };\n  const rightPosition = (parentRect: DOMRect, tooltipRect: DOMRect) => {\n    if (renderAsPortal) {\n      return {\n        top: `calc(${parentRect.top}px + ${parentRect.height / 2}px - ${tooltipRect.height / 2}px)`,\n        left: `calc(${parentRect.left}px + ${parentRect.width}px + var(--unit))`,\n      };\n    }\n    return {\n      top: `calc(50% - ${tooltipRect.height / 2}px)`,\n      left: 'calc(100% + var(--unit))',\n    };\n  };\n  const leftPosition = (parentRect: DOMRect, tooltipRect: DOMRect) => {\n    if (renderAsPortal) {\n      return {\n        top: `calc(${parentRect.top}px + ${parentRect.height / 2}px - ${tooltipRect.height / 2}px)`,\n        left: `calc(${parentRect.left}px - ${tooltipRect.width}px - var(--unit))`,\n      };\n    }\n    return {\n      top: `calc(50% - ${tooltipRect.height / 2}px)`,\n      left: `calc(-1 * var(--unit) - ${tooltipRect.width}px)`,\n      width: `${tooltipRect.width}px`,\n    };\n  };\n  const calculateTooltipPosition = () => {\n    if (parentRef && parentRef.current && tooltipRef && tooltipRef.current) {\n      const {clientWidth, clientHeight} = document.body;\n      const _parentRect = parentRef.current.getBoundingClientRect();\n      const _tooltipRect = tooltipRef.current.getBoundingClientRect();\n      let position: any = undefined,\n        placementPos = placement;\n      if (_parentRect.height && _parentRect.width && _tooltipRect.height && _tooltipRect.width) {\n        switch (placement) {\n          case 'top':\n            if (_parentRect.top - _parentRect.height - _tooltipRect.height - 8 <= 0) {\n              position = bottomPosition(_parentRect, _tooltipRect);\n              placementPos = 'bottom';\n            } else {\n              position = topPosition(_parentRect, _tooltipRect);\n              placementPos = 'top';\n            }\n            break;\n          case 'right':\n            if (_parentRect.left + _parentRect.width + _tooltipRect.width + 8 >= clientWidth) {\n              position = leftPosition(_parentRect, _tooltipRect);\n              placementPos = 'left';\n            } else {\n              position = rightPosition(_parentRect, _tooltipRect);\n              placementPos = 'right';\n            }\n            break;\n          case 'left':\n            if (_parentRect.left - _tooltipRect.width - 8 <= 0) {\n              position = rightPosition(_parentRect, _tooltipRect);\n              placementPos = 'right';\n            } else {\n              position = leftPosition(_parentRect, _tooltipRect);\n              placementPos = 'left';\n            }\n            break;\n          case 'bottom':\n          default:\n            if (_parentRect.top + _parentRect.height + _tooltipRect.height + 8 >= clientHeight) {\n              position = topPosition(_parentRect, _tooltipRect);\n              placementPos = 'top';\n            } else {\n              position = bottomPosition(_parentRect, _tooltipRect);\n              placementPos = 'bottom';\n            }\n            break;\n        }\n        return {\n          position: {\n            ...position,\n            position: renderAsPortal ? 'fixed' : undefined,\n          },\n          placement: placementPos,\n        };\n      }\n      return undefined;\n    }\n  };\n  const tooltip = (\n    <div\n      id={id}\n      className={`${renderAsPortal ? 'tag-ds' : ''} tooltip ${placementSt ?? ''} ${className || ''}`}\n      ref={tooltipRef}\n      style={{...position}}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n  const container = document.getElementById('root') || document.body;\n  return renderAsPortal ? (show ? ReactDOM.createPortal(tooltip, container) : null) : tooltip;\n};\nexport default Tooltip;\n"],"names":["props","parentRef","className","children","id","renderAsPortal","_a","placement","rest","__rest","tooltipRef","useRef","_b","__read","useState","show","setShow","_c","undefined","position","setPosition","_d","placementSt","setPlacementSt","useEffect","current","parent_1","onmouseenter","onmouseleave","_position","calculateTooltipPosition","topPosition","parentRect","tooltipRect","top","concat","height","left","width","bottomPosition","rightPosition","leftPosition","document","body","clientWidth","clientHeight","_parentRect","getBoundingClientRect","_tooltipRect","position_1","placementPos","__assign","tooltip","_jsx","jsx","ref","style","container","getElementById","ReactDOM","createPortal"],"mappings":"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"}