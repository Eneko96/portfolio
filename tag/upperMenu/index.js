"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(t),a=o(n),r=function(){return r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function c(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return r}var l=i.default.memo((function(n){var o=n.children,a=n.className,s=n.disabled,l=c(n,["children","className","disabled"]),d=h(),u=d.onToggleMenu,f=d.setDropdownButtonDimensions,m=d.showMenu,p=i.default.useRef(null);return t.useEffect((function(){if(p&&p.current){var e=p.current.getBoundingClientRect();e&&f({width:e.width,height:e.height})}}),[m]),e.jsx("div",r({className:"dropdown-button".concat(s?"_disabled":""," ").concat(a||""),onClick:u,ref:p},l,{children:o}))})),d=function(n){var o=n.className,s=n.children,l=c(n,["className","children"]),d=i.default.useRef(null),u=h(),f=u.showMenu,m=u.setDropdownMenuDimensions,p=u.position,v=u.dropdownRef,g=u.handleClickMenu;t.useEffect((function(){if(d&&d.current){var e=d.current.getBoundingClientRect();e&&m({width:e.width,height:e.height})}}),[f]);var x=e.jsx("div",r({ref:d,className:"dropdown-menu ".concat(f?"":"hidden"," ").concat(o||""),style:p,onClick:g},l,{children:s}));if(v&&v.current){var w=document.getElementById("root");return a.default.createPortal(x,v.current||w||document.body)}return null},u=i.default.createContext({}),f=function(n){var o=n.children,i=n.className,a=n.onChangeToggleMenu,l=n.itemsDivider,d=n.forceRefresh,f=n.defaultShow,h=n.keepShown,m=void 0!==h&&h,p=n.placement,v=void 0===p?"bottom":p,g=c(n,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=s(t.useState(!1),2),w=x[0],N=x[1],j=s(t.useState(d||0),2),b=j[0],y=j[1],C=s(t.useState({width:0,height:0}),2),k=C[0],E=C[1],S=s(t.useState({width:0,height:0}),2),R=S[0],M=S[1],O=t.useRef(null);t.useEffect((function(){void 0!==f&&f!==w&&N(f)}),[f]),t.useEffect((function(){d&&b!==d&&y(d)}),[d,b]);var D=function(e){e&&e.target&&O&&O.current&&"true"===O.current.getAttribute("data-show")&&!O.current.contains(e.target)&&(N(!1),"function"==typeof a&&a(!1))};t.useEffect((function(){return document.addEventListener("click",D),document.addEventListener("scroll",(function(){return y((function(e){return e++}))})),function(){document.removeEventListener("click",D),document.removeEventListener("scroll",(function(){return y((function(e){return e++}))}))}}),[]);var P=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},_=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},B=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},L=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},T=function(e){return"".concat(e,"px")},A=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},I=function(e){return"".concat(e,"px")},q=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},F=t.useMemo((function(){var e,t="",n=0;if(O&&O.current){var o=O.current.getBoundingClientRect();n=k.width<R.width?R.width:k.width;var i=document.body,a=i.clientHeight,r=i.clientWidth;switch(v){case"top":t=o.top-k.height-8<0?_(o.top,R.height):P(o.top,k.height),e=o.left+n>r?A(o.left,n,R.width):T(o.left);break;case"right":e=o.left+n+8>r?L(o.left,n):B(o.left,R.width),t=o.top+k.height>a?q(o.top,k.height,R.height):I(o.top);break;case"bottom":t=o.top+k.height+8>a?P(o.top,k.height):_(o.top,R.height),e=o.left+n>r?A(o.left,n,R.width):T(o.left);break;case"left":e=o.left-n-8<0?B(o.left,R.width):L(o.left,n),t=o.top+k.height>a?q(o.top,k.height,R.height):I(o.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[k,R]);return e.jsx(u.Provider,r({value:{showMenu:w,setDropdownMenuDimensions:E,setDropdownButtonDimensions:M,handleClickMenu:function(){m||(N(!1),"function"==typeof a&&a(!1))},itemsDivider:l,dropdownRef:O,onChangeToggleMenu:a,onToggleMenu:function(){N((function(e){return"function"==typeof a&&a(!e),!e}))},position:F}},{children:e.jsx("div",r({ref:O,className:"dropdown ".concat(i||""),"data-show":w},g,{children:o}))}))},h=function(){return t.useContext(u)},m=function(t){var n=t.className,o=t.children,i=c(t,["className","children"]);return e.jsx("div",r({className:"notification-header ".concat(n||"")},i,{children:o}))},p=function(t){var n=t.className,o=t.children,i=c(t,["className","children"]);return e.jsx("div",r({className:"notification-body ".concat(n||"")},i,{children:o}))},v=function(t){var n=t.className,o=t.children,i=c(t,["className","children"]);return e.jsx("div",r({className:"notification-footer ".concat(n||"")},i,{children:o}))},g=function(n){var o=n.className,i=n.renderAsPortal,s=n.icon,l=n.children,d=n.onClose,u=n.success,f=n.error,h=n.warning,m=n.info,p=(n.read,n.show),v=n.setShow,g=c(n,["className","renderAsPortal","icon","children","onClose","success","error","warning","info","read","show","setShow"]),x=g&&g["data-testid"]?g["data-testid"]+"-close-test":void 0,w=t.useRef(null);t.useEffect((function(){return p&&i&&!d&&(clearTimeout(w.current),w.current=setTimeout((function(){"function"==typeof v&&v(!1)}),5e3)),function(){clearTimeout(w.current)}}),[p]);var N=p?e.jsxs("div",r({className:"".concat(i?"tag-ds":""," notification_").concat(u?"success":f?"error":m?"info":h?"warning":"read"," ").concat(o||"")},g,{children:["function"==typeof d&&e.jsx((function(){return e.jsx("button",r({type:"button",className:"notification-close-button",onClick:d,"data-testid":x||void 0},{children:e.jsx("span",r({className:"material-icons"},{children:"close"}))}))}),{}),s?e.jsxs(e.Fragment,{children:[e.jsx("div",r({className:"notification-icon"},{children:s})),e.jsx("div",r({className:"notification-content"},{children:l}))]}):l]})):null,j=document.getElementById("root")||document.body;return i?a.default.createPortal(N,j):N},x=function(n){var o=n.show,i=n.children,a=n.title,s=n.action,l=n.onClose,d=n.showCloseButton,u=n.onAction,f=n.className,h=n.parentRef,m=c(n,["show","children","title","action","onClose","showCloseButton","onAction","className","parentRef"]),p=t.useRef(null),v=function(e){e&&e.target&&(p&&p.current&&!p.current.contains(e.target)&&!h||p&&p.current&&!p.current.contains(e.target)&&h&&h.current&&!h.current.contains(e.target))&&o&&l()};return t.useEffect((function(){return d||m&&m["data-handlecloseclick"]?document.addEventListener("click",v):document.addEventListener("mousemove",v),function(){document.removeEventListener("mousemove",v),document.removeEventListener("click",v)}})),o?e.jsxs("div",r({ref:p,className:"overflow-menu ".concat(f||""),"data-testid":m["data-testid"]?m["data-testid"]:void 0},m,{children:[e.jsxs("div",r({className:"overflow-menu-header"},{children:[a&&e.jsx("div",r({className:"small-title mr3"},{children:a})),s&&e.jsx("div",r({className:"overflow-menu-action link_small",onClick:u,"data-testid":m["data-testid"]?m["data-testid"]+"-action-button":void 0},{children:s})),d&&e.jsx("button",r({type:"button",className:"overflow-menu-close",onClick:l,"data-testid":m["data-testid"]?m["data-testid"]+"-close-button":void 0},{children:e.jsx("span",r({className:"material-icons"},{children:"close"}))}))]})),e.jsx("div",r({className:"overflow-menu-body"},{children:i}))]})):null};exports.default=function(n){var o=n.avatar,i=n.title,a=n.notifications,s=n.options,u=n.className,h=c(n,["avatar","title","notifications","options","className"]),w=t.useRef(null);return e.jsxs("div",r({className:"upper-menu ".concat(u||""),"data-testid":h&&h["data-testid"]?h["data-testid"]:void 0},{children:[i&&e.jsx("div",r({className:"upper-menu_left","data-testid":h&&h["data-testid"]?h["data-testid"]+"-title":void 0},{children:i})),e.jsxs("div",r({className:"upper-menu_right"},{children:[a&&e.jsxs("div",r({className:"upper-menu-notifications"},{children:[e.jsxs("button",r({type:"button",ref:w,className:"upper-menu-icon",onClick:a.setShowItems,"data-testid":h&&h["data-testid"]?h["data-testid"]+"-notif-icon":void 0},{children:[a.items.length>0&&e.jsx("div",r({className:"badge_small"},{children:a.items.length})),e.jsx("span",r({className:"material-icons"},{children:"notifications"}))]})),e.jsx(x,r({show:a.showItems,className:"upper-menu-overflow notification-center",title:a.title,onClose:a.setShowItems,action:a.action,onAction:a.onAction,parentRef:w},{children:a.items.length>0?a.items.map((function(n,o){return function(n,o){var i,a;return t.createElement(g,r({},"error"===(a=n.type)?{error:!0}:"info"===a?{info:!0}:"read"===a?{read:!0}:"warning"===a?{warning:!0}:{info:!0},{className:"upper-menu-overflow-notification",show:null===(i=n.show)||void 0===i||i,key:"upper-menu-notification-".concat(o),icon:n.icon}),n.header&&e.jsxs(m,{children:[n.header,n.created&&e.jsxs("span",r({className:"notification-center-text"},{children:[n.created.getSeconds(),"s"]}))]}),n.body&&e.jsx(p,{children:n.body}),n.footer&&e.jsx(v,{children:n.footer}))}(n,o)})):a.emptyMessage}))]})),e.jsxs("div",r({className:"avatar-wrapper"},{children:["string"==typeof o.img?e.jsx("img",{src:o.img,alt:"avatar icon",className:"avatar_xsmall"}):o.img,e.jsxs("div",r({className:"avatar-text-wrapper"},{children:[e.jsx("span",r({className:"avatar-title"},{children:o.title})),o.subtitle&&e.jsx("span",r({className:"avatar-subtitle"},{children:o.subtitle}))]}))]})),s&&s.length>0&&e.jsxs(f,r({className:"upper-menu-dropdown"},{children:[e.jsx(l,{children:e.jsx("button",r({type:"button",className:"upper-menu-info","data-testid":h&&h["data-testid"]?h["data-testid"]+"-more-info":void 0},{children:e.jsx("span",r({className:"material-icons"},{children:"more_vert"}))}))}),e.jsx(d,{children:s.map((function(t,n){var o=t.name,i=t.onClick;return e.jsx("li",r({className:"dropdown-item",onClick:i},{children:o}),n+"-upper-menu-dropdown")}))})]}))]}))]}))};
//# sourceMappingURL=index.js.map
