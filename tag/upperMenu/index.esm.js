import{jsx as t,jsxs as e,Fragment as n}from"react/jsx-runtime";import o,{useEffect as i,useContext as r,useState as c,useRef as a,useMemo as l,createElement as s}from"react";import d from"react-dom";var u=function(){return u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},u.apply(this,arguments)};function h(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)c.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return c}var f=o.memo((function(e){var n=e.children,r=e.className,c=e.disabled,a=h(e,["children","className","disabled"]),l=w(),s=l.onToggleMenu,d=l.setDropdownButtonDimensions,m=l.showMenu,f=o.useRef(null);return i((function(){if(f&&f.current){var t=f.current.getBoundingClientRect();t&&d({width:t.width,height:t.height})}}),[m]),t("div",u({className:"dropdown-button".concat(c?"_disabled":""," ").concat(r||""),onClick:s,ref:f},a,{children:n}))})),p=function(e){var n=e.className,r=e.children,c=h(e,["className","children"]),a=o.useRef(null),l=w(),s=l.showMenu,m=l.setDropdownMenuDimensions,f=l.position,p=l.dropdownRef,v=l.handleClickMenu;i((function(){if(a&&a.current){var t=a.current.getBoundingClientRect();t&&m({width:t.width,height:t.height})}}),[s]);var g=t("div",u({ref:a,className:"dropdown-menu ".concat(s?"":"hidden"," ").concat(n||""),style:f,onClick:v},c,{children:r}));if(p&&p.current){var N=document.getElementById("root");return d.createPortal(g,p.current||N||document.body)}return null},v=o.createContext({}),g=function(e){var n=e.children,o=e.className,r=e.onChangeToggleMenu,s=e.itemsDivider,d=e.forceRefresh,f=e.defaultShow,p=e.keepShown,g=void 0!==p&&p,w=e.placement,N=void 0===w?"bottom":w,b=h(e,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),y=m(c(!1),2),x=y[0],C=y[1],k=m(c(d||0),2),M=k[0],S=k[1],O=m(c({width:0,height:0}),2),R=O[0],D=O[1],E=m(c({width:0,height:0}),2),B=E[0],P=E[1],L=a(null);i((function(){void 0!==f&&f!==x&&C(f)}),[f]),i((function(){d&&M!==d&&S(d)}),[d,M]);var T=function(t){t&&t.target&&L&&L.current&&"true"===L.current.getAttribute("data-show")&&!L.current.contains(t.target)&&(C(!1),"function"==typeof r&&r(!1))};i((function(){return document.addEventListener("click",T),document.addEventListener("scroll",(function(){return S((function(t){return t++}))})),function(){document.removeEventListener("click",T),document.removeEventListener("scroll",(function(){return S((function(t){return t++}))}))}}),[]);var _=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},j=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},A=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},I=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},H=function(t){return"".concat(t,"px")},W=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},q=function(t){return"".concat(t,"px")},z=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},F=l((function(){var t,e="",n=0;if(L&&L.current){var o=L.current.getBoundingClientRect();n=R.width<B.width?B.width:R.width;var i=document.body,r=i.clientHeight,c=i.clientWidth;switch(N){case"top":e=o.top-R.height-8<0?j(o.top,B.height):_(o.top,R.height),t=o.left+n>c?W(o.left,n,B.width):H(o.left);break;case"right":t=o.left+n+8>c?I(o.left,n):A(o.left,B.width),e=o.top+R.height>r?z(o.top,R.height,B.height):q(o.top);break;case"bottom":e=o.top+R.height+8>r?_(o.top,R.height):j(o.top,B.height),t=o.left+n>c?W(o.left,n,B.width):H(o.left);break;case"left":t=o.left-n-8<0?A(o.left,B.width):I(o.left,n),e=o.top+R.height>r?z(o.top,R.height,B.height):q(o.top)}}return{left:t,top:e,width:"".concat(n,"px")}}),[R,B]);return t(v.Provider,u({value:{showMenu:x,setDropdownMenuDimensions:D,setDropdownButtonDimensions:P,handleClickMenu:function(){g||(C(!1),"function"==typeof r&&r(!1))},itemsDivider:s,dropdownRef:L,onChangeToggleMenu:r,onToggleMenu:function(){C((function(t){return"function"==typeof r&&r(!t),!t}))},position:F}},{children:t("div",u({ref:L,className:"dropdown ".concat(o||""),"data-show":x},b,{children:n}))}))},w=function(){return r(v)},N=function(e){var n=e.className,o=e.children,i=h(e,["className","children"]);return t("div",u({className:"notification-header ".concat(n||"")},i,{children:o}))},b=function(e){var n=e.className,o=e.children,i=h(e,["className","children"]);return t("div",u({className:"notification-body ".concat(n||"")},i,{children:o}))},y=function(e){var n=e.className,o=e.children,i=h(e,["className","children"]);return t("div",u({className:"notification-footer ".concat(n||"")},i,{children:o}))},x=function(o){var r=o.className,c=o.renderAsPortal,l=o.icon,s=o.children,m=o.onClose,f=o.success,p=o.error,v=o.warning,g=o.info,w=(o.read,o.show),N=o.setShow,b=h(o,["className","renderAsPortal","icon","children","onClose","success","error","warning","info","read","show","setShow"]),y=b&&b["data-testid"]?b["data-testid"]+"-close-test":void 0,x=a(null);i((function(){return w&&c&&!m&&(clearTimeout(x.current),x.current=setTimeout((function(){"function"==typeof N&&N(!1)}),5e3)),function(){clearTimeout(x.current)}}),[w]);var C=w?e("div",u({className:"".concat(c?"tag-ds":""," notification_").concat(f?"success":p?"error":g?"info":v?"warning":"read"," ").concat(r||"")},b,{children:["function"==typeof m&&t((function(){return t("button",u({type:"button",className:"notification-close-button",onClick:m,"data-testid":y||void 0},{children:t("span",u({className:"material-icons"},{children:"close"}))}))}),{}),l?e(n,{children:[t("div",u({className:"notification-icon"},{children:l})),t("div",u({className:"notification-content"},{children:s}))]}):s]})):null,k=document.getElementById("root")||document.body;return c?d.createPortal(C,k):C},C=function(n){var o=n.show,r=n.children,c=n.title,l=n.action,s=n.onClose,d=n.showCloseButton,m=n.onAction,f=n.className,p=n.parentRef,v=h(n,["show","children","title","action","onClose","showCloseButton","onAction","className","parentRef"]),g=a(null),w=function(t){t&&t.target&&(g&&g.current&&!g.current.contains(t.target)&&!p||g&&g.current&&!g.current.contains(t.target)&&p&&p.current&&!p.current.contains(t.target))&&o&&s()};return i((function(){return d||v&&v["data-handlecloseclick"]?document.addEventListener("click",w):document.addEventListener("mousemove",w),function(){document.removeEventListener("mousemove",w),document.removeEventListener("click",w)}})),o?e("div",u({ref:g,className:"overflow-menu ".concat(f||""),"data-testid":v["data-testid"]?v["data-testid"]:void 0},v,{children:[e("div",u({className:"overflow-menu-header"},{children:[c&&t("div",u({className:"small-title mr3"},{children:c})),l&&t("div",u({className:"overflow-menu-action link_small",onClick:m,"data-testid":v["data-testid"]?v["data-testid"]+"-action-button":void 0},{children:l})),d&&t("button",u({type:"button",className:"overflow-menu-close",onClick:s,"data-testid":v["data-testid"]?v["data-testid"]+"-close-button":void 0},{children:t("span",u({className:"material-icons"},{children:"close"}))}))]})),t("div",u({className:"overflow-menu-body"},{children:r}))]})):null},k=function(n){var o=n.avatar,i=n.title,r=n.notifications,c=n.options,l=n.className,d=h(n,["avatar","title","notifications","options","className"]),m=a(null);return e("div",u({className:"upper-menu ".concat(l||""),"data-testid":d&&d["data-testid"]?d["data-testid"]:void 0},{children:[i&&t("div",u({className:"upper-menu_left","data-testid":d&&d["data-testid"]?d["data-testid"]+"-title":void 0},{children:i})),e("div",u({className:"upper-menu_right"},{children:[r&&e("div",u({className:"upper-menu-notifications"},{children:[e("button",u({type:"button",ref:m,className:"upper-menu-icon",onClick:r.setShowItems,"data-testid":d&&d["data-testid"]?d["data-testid"]+"-notif-icon":void 0},{children:[r.items.length>0&&t("div",u({className:"badge_small"},{children:r.items.length})),t("span",u({className:"material-icons"},{children:"notifications"}))]})),t(C,u({show:r.showItems,className:"upper-menu-overflow notification-center",title:r.title,onClose:r.setShowItems,action:r.action,onAction:r.onAction,parentRef:m},{children:r.items.length>0?r.items.map((function(n,o){return function(n,o){var i,r;return s(x,u({},"error"===(r=n.type)?{error:!0}:"info"===r?{info:!0}:"read"===r?{read:!0}:"warning"===r?{warning:!0}:{info:!0},{className:"upper-menu-overflow-notification",show:null===(i=n.show)||void 0===i||i,key:"upper-menu-notification-".concat(o),icon:n.icon}),n.header&&e(N,{children:[n.header,n.created&&e("span",u({className:"notification-center-text"},{children:[n.created.getSeconds(),"s"]}))]}),n.body&&t(b,{children:n.body}),n.footer&&t(y,{children:n.footer}))}(n,o)})):r.emptyMessage}))]})),e("div",u({className:"avatar-wrapper"},{children:["string"==typeof o.img?t("img",{src:o.img,alt:"avatar icon",className:"avatar_xsmall"}):o.img,e("div",u({className:"avatar-text-wrapper"},{children:[t("span",u({className:"avatar-title"},{children:o.title})),o.subtitle&&t("span",u({className:"avatar-subtitle"},{children:o.subtitle}))]}))]})),c&&c.length>0&&e(g,u({className:"upper-menu-dropdown"},{children:[t(f,{children:t("button",u({type:"button",className:"upper-menu-info","data-testid":d&&d["data-testid"]?d["data-testid"]+"-more-info":void 0},{children:t("span",u({className:"material-icons"},{children:"more_vert"}))}))}),t(p,{children:c.map((function(e,n){var o=e.name,i=e.onClick;return t("li",u({className:"dropdown-item",onClick:i},{children:o}),n+"-upper-menu-dropdown")}))})]}))]}))]}))};export{k as default};
//# sourceMappingURL=index.esm.js.map
