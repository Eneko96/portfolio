import{jsx as t,jsxs as e}from"react/jsx-runtime";import n,{useEffect as r,useContext as o,useState as c,useRef as i,useMemo as a}from"react";import l from"react-dom";var u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},u.apply(this,arguments)};function d(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,c=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=c.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}return i}var h=function(e){var n=e.id,r=e.title,o=e.href,c=d(e,["id","title","href"]);return t("a",u({href:o,target:"_self",id:n,"data-testid":c&&c["data-testid"]?"".concat(c["data-testid"],"-link"):void 0,className:"breadcrumb-item"},c,{children:r.length>30?r.substring(0,30)+"...":r}),n)},f=n.memo((function(e){var o=e.children,c=e.className,i=e.disabled,a=d(e,["children","className","disabled"]),l=v(),s=l.onToggleMenu,h=l.setDropdownButtonDimensions,f=l.showMenu,p=n.useRef(null);return r((function(){if(p&&p.current){var t=p.current.getBoundingClientRect();t&&h({width:t.width,height:t.height})}}),[f]),t("div",u({className:"dropdown-button".concat(i?"_disabled":""," ").concat(c||""),onClick:s,ref:p},a,{children:o}))})),p=function(e){var o=e.className,c=e.children,i=d(e,["className","children"]),a=n.useRef(null),s=v(),h=s.showMenu,f=s.setDropdownMenuDimensions,p=s.position,m=s.dropdownRef,g=s.handleClickMenu;r((function(){if(a&&a.current){var t=a.current.getBoundingClientRect();t&&f({width:t.width,height:t.height})}}),[h]);var b=t("div",u({ref:a,className:"dropdown-menu ".concat(h?"":"hidden"," ").concat(o||""),style:p,onClick:g},i,{children:c}));if(m&&m.current){var w=document.getElementById("root");return l.createPortal(b,m.current||w||document.body)}return null},m=n.createContext({}),g=function(e){var n=e.children,o=e.className,l=e.onChangeToggleMenu,h=e.itemsDivider,f=e.forceRefresh,p=e.defaultShow,g=e.keepShown,v=void 0!==g&&g,b=e.placement,w=void 0===b?"bottom":b,y=d(e,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=s(c(!1),2),N=x[0],k=x[1],C=s(c(f||0),2),M=C[0],O=C[1],D=s(c({width:0,height:0}),2),E=D[0],R=D[1],S=s(c({width:0,height:0}),2),j=S[0],B=S[1],P=i(null);r((function(){void 0!==p&&p!==N&&k(p)}),[p]),r((function(){f&&M!==f&&O(f)}),[f,M]);var _=function(t){t&&t.target&&P&&P.current&&"true"===P.current.getAttribute("data-show")&&!P.current.contains(t.target)&&(k(!1),"function"==typeof l&&l(!1))};r((function(){return document.addEventListener("click",_),document.addEventListener("scroll",(function(){return O((function(t){return t++}))})),function(){document.removeEventListener("click",_),document.removeEventListener("scroll",(function(){return O((function(t){return t++}))}))}}),[]);var T=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},L=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},A=function(t,e){return"calc(".concat(t,"px + ").concat(e,"px + var(--unit))")},I=function(t,e){return"calc(".concat(t,"px - ").concat(e,"px - var(--unit))")},z=function(t){return"".concat(t,"px")},H=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},W=function(t){return"".concat(t,"px")},q=function(t,e,n){return"calc(".concat(t,"px + ").concat(n,"px - ").concat(e,"px)")},F=a((function(){var t,e="",n=0;if(P&&P.current){var r=P.current.getBoundingClientRect();n=E.width<j.width?j.width:E.width;var o=document.body,c=o.clientHeight,i=o.clientWidth;switch(w){case"top":e=r.top-E.height-8<0?L(r.top,j.height):T(r.top,E.height),t=r.left+n>i?H(r.left,n,j.width):z(r.left);break;case"right":t=r.left+n+8>i?I(r.left,n):A(r.left,j.width),e=r.top+E.height>c?q(r.top,E.height,j.height):W(r.top);break;case"bottom":e=r.top+E.height+8>c?T(r.top,E.height):L(r.top,j.height),t=r.left+n>i?H(r.left,n,j.width):z(r.left);break;case"left":t=r.left-n-8<0?A(r.left,j.width):I(r.left,n),e=r.top+E.height>c?q(r.top,E.height,j.height):W(r.top)}}return{left:t,top:e,width:"".concat(n,"px")}}),[E,j]);return t(m.Provider,u({value:{showMenu:N,setDropdownMenuDimensions:R,setDropdownButtonDimensions:B,handleClickMenu:function(){v||(k(!1),"function"==typeof l&&l(!1))},itemsDivider:h,dropdownRef:P,onChangeToggleMenu:l,onToggleMenu:function(){k((function(t){return"function"==typeof l&&l(!t),!t}))},position:F}},{children:t("div",u({ref:P,className:"dropdown ".concat(o||""),"data-show":N},y,{children:n}))}))},v=function(){return o(m)},b=function(r){var o=r.id,c=r.className,i=r.children,a=d(r,["id","className","children"]);return function(){var r,l=[],d=[],s=[];if(i){var m=n.Children.toArray(i);if(m.length>1)m.length>4?(m.forEach((function(t,e){e>0&&e<m.length-1?d.push(n.cloneElement(t,u(u({},t.props),{className:"dropdown-item"}))):l.push(n.cloneElement(t,u(u({},t.props),{className:e===m.length-1?"breadcrumb-item_active":"breadcrumb-item"})))})),s=[l[0],(r=d,e(g,u({"data-testid":a&&a["data-testid"]?"".concat(a["data-testid"],"-dropdown"):void 0},{children:[t(f,u({className:"breadcrumb-dots"},{children:t("span",u({className:"material-icons"},{children:"more_horiz"}))})),t(p,{children:r})]}),r)),l[1]]):s=m.map((function(t,e){return n.cloneElement(t,u(u({},t.props),{className:e===m.length-1?"breadcrumb-item_active":"breadcrumb-item"}))}));else if(m[0].type===h){var v=n.cloneElement(m[0],u(u({},m[0].props),{className:"breadcrumb-item_active"}));s=[v]}}return t("div",u({id:o,className:"breadcrumb-container ".concat(c||"")},a,{children:s.map((function(e,n){return n<s.length-1?[e,(r=n,t("span",{className:"breadcrumb-item-separator"},r+"item-separator"))]:e;var r}))}))}()};export{h as BreadcrumbItem,b as default};
//# sourceMappingURL=index.esm.js.map
