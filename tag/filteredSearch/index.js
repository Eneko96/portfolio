"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(t),c=r(n),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,c=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var u=i.default.memo((function(n){var r=n.children,c=n.className,l=n.disabled,s=o(n,["children","className","disabled"]),u=p(),d=u.onToggleMenu,f=u.setDropdownButtonDimensions,h=u.showMenu,m=i.default.useRef(null);return t.useEffect((function(){if(m&&m.current){var e=m.current.getBoundingClientRect();e&&f({width:e.width,height:e.height})}}),[h]),e.jsx("div",a({className:"dropdown-button".concat(l?"_disabled":""," ").concat(c||""),onClick:d,ref:m},s,{children:r}))})),d=function(n){var r=n.className,l=n.children,s=o(n,["className","children"]),u=i.default.useRef(null),d=p(),f=d.showMenu,h=d.setDropdownMenuDimensions,m=d.position,v=d.dropdownRef,g=d.handleClickMenu;t.useEffect((function(){if(u&&u.current){var e=u.current.getBoundingClientRect();e&&h({width:e.width,height:e.height})}}),[f]);var x=e.jsx("div",a({ref:u,className:"dropdown-menu ".concat(f?"":"hidden"," ").concat(r||""),style:m,onClick:g},s,{children:l}));if(v&&v.current){var b=document.getElementById("root");return c.default.createPortal(x,v.current||b||document.body)}return null},f=i.default.createContext({}),h=function(n){var r=n.children,i=n.className,c=n.onChangeToggleMenu,s=n.itemsDivider,u=n.forceRefresh,d=n.defaultShow,h=n.keepShown,p=void 0!==h&&h,m=n.placement,v=void 0===m?"bottom":m,g=o(n,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=l(t.useState(!1),2),b=x[0],y=x[1],j=l(t.useState(u||0),2),w=j[0],N=j[1],C=l(t.useState({width:0,height:0}),2),S=C[0],M=C[1],k=l(t.useState({width:0,height:0}),2),E=k[0],O=k[1],R=t.useRef(null);t.useEffect((function(){void 0!==d&&d!==b&&y(d)}),[d]),t.useEffect((function(){u&&w!==u&&N(u)}),[u,w]);var _=function(e){e&&e.target&&R&&R.current&&"true"===R.current.getAttribute("data-show")&&!R.current.contains(e.target)&&(y(!1),"function"==typeof c&&c(!1))};t.useEffect((function(){return document.addEventListener("click",_),document.addEventListener("scroll",(function(){return N((function(e){return e++}))})),function(){document.removeEventListener("click",_),document.removeEventListener("scroll",(function(){return N((function(e){return e++}))}))}}),[]);var D=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},T=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},A=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},P=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},V=function(e){return"".concat(e,"px")},B=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},I=function(e){return"".concat(e,"px")},q=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},F=t.useMemo((function(){var e,t="",n=0;if(R&&R.current){var r=R.current.getBoundingClientRect();n=S.width<E.width?E.width:S.width;var i=document.body,c=i.clientHeight,a=i.clientWidth;switch(v){case"top":t=r.top-S.height-8<0?T(r.top,E.height):D(r.top,S.height),e=r.left+n>a?B(r.left,n,E.width):V(r.left);break;case"right":e=r.left+n+8>a?P(r.left,n):A(r.left,E.width),t=r.top+S.height>c?q(r.top,S.height,E.height):I(r.top);break;case"bottom":t=r.top+S.height+8>c?D(r.top,S.height):T(r.top,E.height),e=r.left+n>a?B(r.left,n,E.width):V(r.left);break;case"left":e=r.left-n-8<0?A(r.left,E.width):P(r.left,n),t=r.top+S.height>c?q(r.top,S.height,E.height):I(r.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[S,E]);return e.jsx(f.Provider,a({value:{showMenu:b,setDropdownMenuDimensions:M,setDropdownButtonDimensions:O,handleClickMenu:function(){p||(y(!1),"function"==typeof c&&c(!1))},itemsDivider:s,dropdownRef:R,onChangeToggleMenu:c,onToggleMenu:function(){y((function(e){return"function"==typeof c&&c(!e),!e}))},position:F}},{children:e.jsx("div",a({ref:R,className:"dropdown ".concat(i||""),"data-show":b},g,{children:r}))}))},p=function(){return t.useContext(f)},m=i.default.createContext({}),v=function(n){var r=n.large,c=n.required,f=n.filter,p=n.multiple,v=n.disabled,g=n.error,x=n.label,b=n.placeholder,y=n.helperText,j=n.helperIcon,w=n.name,N=n.className,C=n.value,S=n.onChange,M=n.filterValue,k=n.onChangeFilter,E=n.children,O=o(n,["large","required","filter","multiple","disabled","error","label","placeholder","helperText","helperIcon","name","className","value","onChange","filterValue","onChangeFilter","children"]),R=t.useRef(),_=function(){return Array.isArray(C)&&p?C:"string"==typeof C||"number"==typeof C?p?[C]:C:p?[]:""},D=l(i.default.useState(_()),2),T=D[0],A=D[1],P=l(t.useState(M||void 0),2),V=P[0],B=P[1],I=l(t.useState(!1),2),q=I[0],F=I[1];t.useEffect((function(){_()!==T&&A(_())}),[C]),t.useEffect((function(){f&&"function"==typeof k&&M!==V&&B(M)}),[M]);var L,W=function(){p?(A([]),S&&S([])):(A(""),S&&S([]))},U=function(e){"function"==typeof k?k(e.target.value):B(e.target.value)},H=function(){"function"==typeof k?k(""):(R&&R.current&&(R.current.value=""),B(""))},z=function(){var t;if(p&&"object"==typeof T&&T.length)return e.jsx("span",a({className:"placeholder"},{children:"".concat(T.length," Options selected")}));if(T&&E){var n=E.find((function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.value)===T}));if(n)return null===(t=n.props)||void 0===t?void 0:t.label}return e.jsx("span",a({className:"placeholder"},{children:b}))};return e.jsx(m.Provider,a({value:{multiple:p,selectedValue:T,filterValue:V,onSelectItem:function(e){if(p){var t=T;t.some((function(t){return t===e}))||(t=s(s([],l(t),!1),[e],!1)),A(t),S&&S(t)}else A(e),S&&S(e)},onRemoveItem:function(e){var t;if(p){var n=T;"object"==typeof n&&(t=n&&n.length&&n.filter((function(t){return t!==e})))}else t="",S&&S("");A(t),S&&S(t)}}},{children:e.jsxs("div",a({className:"input-wrapper".concat(v?"_disabled":""," ").concat(g?"error":"","  ").concat(N||"")},{children:[x&&e.jsxs("label",a({className:"caption"},{children:[c&&e.jsx("small",{children:"*"}),x]})),e.jsxs(h,a({onChangeToggleMenu:function(e){return F(e)},keepShown:p},{children:[e.jsx(u,a({"data-testid":O&&O["data-testid"]?O["data-testid"]:void 0,disabled:v},{children:f?e.jsxs("div",a({className:"input-container"},{children:[e.jsx("input",{"data-testid":O&&O["data-testid"]?"".concat(O["data-testid"],"-input"):void 0,className:"input ".concat(r?"large":""),placeholder:T&&T.length&&p?"".concat(T.length," Options selected"):b,ref:R,type:"text",defaultValue:V,onChange:U,disabled:v}),V?e.jsx("span",a({"data-testid":O&&O["data-testid"]?"".concat(O["data-testid"],"-remove-filter-btn"):void 0,className:"material-icons input-icon-box",onClick:H},{children:"close"})):e.jsx("span",a({className:"material-icons input-icon-box"},{children:"search"}))]})):e.jsxs("div",a({className:"input-container"},{children:[e.jsx("div",a({className:r?"input_large":"input"},{children:z()})),q?e.jsx("span",a({className:"material-icons input-icon-box"},{children:"expand_less"})):e.jsx("span",a({className:"material-icons input-icon-box"},{children:"expand_more"}))]}))})),e.jsx(d,{children:e.jsx("ul",{children:E})})]})),e.jsx("input",{type:"hidden",readOnly:!0,name:w,disabled:v,value:T}),(L=null,(f||p)&&T&&T.length?(f&&!p&&(L=e.jsxs("button",a({type:"button","data-testid":O&&O["data-testid"]?"".concat(O["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(v?"_disabled":""),onClick:W},{children:[z(),e.jsx("span",a({className:"material-icons right"},{children:"close"}))]}))),p&&(L=e.jsxs("button",a({type:"button","data-testid":O&&O["data-testid"]?"".concat(O["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(v?"_disabled":""),onClick:W},{children:["".concat(T.length," Options selected"),e.jsx("span",a({className:"material-icons right"},{children:"close"}))]}))),e.jsxs("div",a({className:"select-bottom-container"},{children:[L,y&&e.jsxs("p",a({className:"input-helper-text"},{children:[j&&e.jsx("span",a({className:"material-icons"},{children:j})),y]}))]}))):y&&e.jsxs("p",a({className:"input-helper-text"},{children:[j&&e.jsx("span",a({className:"material-icons"},{children:j})),y]})))]}))}))},g=function(e){var t=e.children;return i.default.Children.toArray(t).every((function(e){return i.default.isValidElement(e)&&e.type===v}))?t:null},x=function(t){var n=t.children;return n?e.jsx("div",a({className:"filtered-search-top"},{children:n})):null};exports.FilteredSearchTopSection=x,exports.MoreFilters=g,exports.default=function(n){var r=n.children,c=n.openFilters,o=function(){var e=l(t.useState(!1),2),n=e[0],r=e[1],i=l(t.useState(!1),2),c=i[0],a=i[1],o=l(t.useState(!1),2),s=o[0],u=o[1];return t.useEffect((function(){var e=function(){window.innerWidth<=672?(r(!0),a(!1),u(!1)):window.innerWidth<=1024?(r(!1),a(!0),u(!1)):(r(!1),a(!1),u(!0))};return e(),function(){return e()}}),[]),{isMobile:n,isTablet:c,isDesktop:s}}().isMobile,s=l(t.useState(!1),2),u=s[0],d=s[1],f=t.useMemo((function(){return i.default.Children.toArray(r)}),[r]),h=t.useRef(null),p=t.useRef(null),m=0,v=null,b=function(e){if(h.current){var t=h.current.getBoundingClientRect();"left"===e?m-120<0?m=0:m-=120:m+120>t.width?m=t.width:m+=120,h.current.scrollTo({left:m,behavior:"smooth"})}},y=function(e){v=setTimeout((function(){h.current&&(h.current.scrollLeft=h.current.scrollLeft-m,requestAnimationFrame((function(){return y()})))}),300)};return t.useEffect((function(){if(p.current&&h.current){var e=p.current,t=h.current,n=getComputedStyle(e).padding.split(" "),r=0;n.length>1&&(r=Number(n[n.length-1].replace(/px|rem|em/,""))),t.scrollWidth>e.clientWidth-2*r?d(!0):e.style.padding="16px 32px"}}),[c]),e.jsxs("div",a({className:"filtered-search"},{children:[f.find((function(e){return i.default.isValidElement(e)&&e.type===x}))||null,c&&e.jsxs("div",a({ref:p,className:"filtered-search-filter-container"},{children:[u&&!o&&e.jsx("button",a({type:"button",onClick:function(){return b("left")},className:"filtered-search-filter-navigation_left",onMouseDown:function(){return y()},onMouseUp:function(){return clearInterval(v)}},{children:e.jsx("span",a({className:"material-icons"},{children:"chevron_left"}))})),e.jsx("div",a({ref:h,className:"filtered-searc-filter-container-inner"},{children:f.find((function(e){return!(!i.default.isValidElement(e)||e.type!==g)&&e}))})),u&&!o&&e.jsx("button",a({type:"button",className:"filtered-search-filter-navigation_right",onMouseDown:function(){return y()},onMouseUp:function(){return clearTimeout(v)},onClick:function(){return b("right")}},{children:e.jsx("span",a({className:"material-icons"},{children:"chevron_right"}))}))]}))]}))};
//# sourceMappingURL=index.js.map
