import{jsx as e,jsxs as t}from"react/jsx-runtime";import n,{useState as r,useEffect as i,useContext as c,useRef as o,useMemo as a}from"react";import l from"react-dom";var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function d(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,c=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var f=n.memo((function(t){var r=t.children,c=t.className,o=t.disabled,a=d(t,["children","className","disabled"]),l=g(),s=l.onToggleMenu,h=l.setDropdownButtonDimensions,f=l.showMenu,p=n.useRef(null);return i((function(){if(p&&p.current){var e=p.current.getBoundingClientRect();e&&h({width:e.width,height:e.height})}}),[f]),e("div",u({className:"dropdown-button".concat(o?"_disabled":""," ").concat(c||""),onClick:s,ref:p},a,{children:r}))})),p=function(t){var r=t.className,c=t.children,o=d(t,["className","children"]),a=n.useRef(null),s=g(),h=s.showMenu,f=s.setDropdownMenuDimensions,p=s.position,m=s.dropdownRef,v=s.handleClickMenu;i((function(){if(a&&a.current){var e=a.current.getBoundingClientRect();e&&f({width:e.width,height:e.height})}}),[h]);var b=e("div",u({ref:a,className:"dropdown-menu ".concat(h?"":"hidden"," ").concat(r||""),style:p,onClick:v},o,{children:c}));if(m&&m.current){var y=document.getElementById("root");return l.createPortal(b,m.current||y||document.body)}return null},m=n.createContext({}),v=function(t){var n=t.children,c=t.className,l=t.onChangeToggleMenu,h=t.itemsDivider,f=t.forceRefresh,p=t.defaultShow,v=t.keepShown,g=void 0!==v&&v,b=t.placement,y=void 0===b?"bottom":b,w=d(t,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),N=s(r(!1),2),x=N[0],C=N[1],M=s(r(f||0),2),k=M[0],O=M[1],D=s(r({width:0,height:0}),2),_=D[0],S=D[1],T=s(r({width:0,height:0}),2),R=T[0],j=T[1],E=o(null);i((function(){void 0!==p&&p!==x&&C(p)}),[p]),i((function(){f&&k!==f&&O(f)}),[f,k]);var A=function(e){e&&e.target&&E&&E.current&&"true"===E.current.getAttribute("data-show")&&!E.current.contains(e.target)&&(C(!1),"function"==typeof l&&l(!1))};i((function(){return document.addEventListener("click",A),document.addEventListener("scroll",(function(){return O((function(e){return e++}))})),function(){document.removeEventListener("click",A),document.removeEventListener("scroll",(function(){return O((function(e){return e++}))}))}}),[]);var V=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},B=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},I=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},P=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},L=function(e){return"".concat(e,"px")},W=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},F=function(e){return"".concat(e,"px")},q=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},U=a((function(){var e,t="",n=0;if(E&&E.current){var r=E.current.getBoundingClientRect();n=_.width<R.width?R.width:_.width;var i=document.body,c=i.clientHeight,o=i.clientWidth;switch(y){case"top":t=r.top-_.height-8<0?B(r.top,R.height):V(r.top,_.height),e=r.left+n>o?W(r.left,n,R.width):L(r.left);break;case"right":e=r.left+n+8>o?P(r.left,n):I(r.left,R.width),t=r.top+_.height>c?q(r.top,_.height,R.height):F(r.top);break;case"bottom":t=r.top+_.height+8>c?V(r.top,_.height):B(r.top,R.height),e=r.left+n>o?W(r.left,n,R.width):L(r.left);break;case"left":e=r.left-n-8<0?I(r.left,R.width):P(r.left,n),t=r.top+_.height>c?q(r.top,_.height,R.height):F(r.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[_,R]);return e(m.Provider,u({value:{showMenu:x,setDropdownMenuDimensions:S,setDropdownButtonDimensions:j,handleClickMenu:function(){g||(C(!1),"function"==typeof l&&l(!1))},itemsDivider:h,dropdownRef:E,onChangeToggleMenu:l,onToggleMenu:function(){C((function(e){return"function"==typeof l&&l(!e),!e}))},position:U}},{children:e("div",u({ref:E,className:"dropdown ".concat(c||""),"data-show":x},w,{children:n}))}))},g=function(){return c(m)},b=n.createContext({}),y=function(c){var a=c.large,l=c.required,m=c.filter,g=c.multiple,y=c.disabled,w=c.error,N=c.label,x=c.placeholder,C=c.helperText,M=c.helperIcon,k=c.name,O=c.className,D=c.value,_=c.onChange,S=c.filterValue,T=c.onChangeFilter,R=c.children,j=d(c,["large","required","filter","multiple","disabled","error","label","placeholder","helperText","helperIcon","name","className","value","onChange","filterValue","onChangeFilter","children"]),E=o(),A=function(){return Array.isArray(D)&&g?D:"string"==typeof D||"number"==typeof D?g?[D]:D:g?[]:""},V=s(n.useState(A()),2),B=V[0],I=V[1],P=s(r(S||void 0),2),L=P[0],W=P[1],F=s(r(!1),2),q=F[0],U=F[1];i((function(){A()!==B&&I(A())}),[D]),i((function(){m&&"function"==typeof T&&S!==L&&W(S)}),[S]);var H,z=function(){g?(I([]),_&&_([])):(I(""),_&&_([]))},G=function(e){"function"==typeof T?T(e.target.value):W(e.target.value)},J=function(){"function"==typeof T?T(""):(E&&E.current&&(E.current.value=""),W(""))},K=function(){var t;if(g&&"object"==typeof B&&B.length)return e("span",u({className:"placeholder"},{children:"".concat(B.length," Options selected")}));if(B&&R){var n=R.find((function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.value)===B}));if(n)return null===(t=n.props)||void 0===t?void 0:t.label}return e("span",u({className:"placeholder"},{children:x}))};return e(b.Provider,u({value:{multiple:g,selectedValue:B,filterValue:L,onSelectItem:function(e){if(g){var t=B;t.some((function(t){return t===e}))||(t=h(h([],s(t),!1),[e],!1)),I(t),_&&_(t)}else I(e),_&&_(e)},onRemoveItem:function(e){var t;if(g){var n=B;"object"==typeof n&&(t=n&&n.length&&n.filter((function(t){return t!==e})))}else t="",_&&_("");I(t),_&&_(t)}}},{children:t("div",u({className:"input-wrapper".concat(y?"_disabled":""," ").concat(w?"error":"","  ").concat(O||"")},{children:[N&&t("label",u({className:"caption"},{children:[l&&e("small",{children:"*"}),N]})),t(v,u({onChangeToggleMenu:function(e){return U(e)},keepShown:g},{children:[e(f,u({"data-testid":j&&j["data-testid"]?j["data-testid"]:void 0,disabled:y},{children:t("div",u({className:"input-container"},m?{children:[e("input",{"data-testid":j&&j["data-testid"]?"".concat(j["data-testid"],"-input"):void 0,className:"input ".concat(a?"large":""),placeholder:B&&B.length&&g?"".concat(B.length," Options selected"):x,ref:E,type:"text",defaultValue:L,onChange:G,disabled:y}),e("span",L?u({"data-testid":j&&j["data-testid"]?"".concat(j["data-testid"],"-remove-filter-btn"):void 0,className:"material-icons input-icon-box",onClick:J},{children:"close"}):u({className:"material-icons input-icon-box"},{children:"search"}))]}:{children:[e("div",u({className:a?"input_large":"input"},{children:K()})),e("span",u({className:"material-icons input-icon-box"},q?{children:"expand_less"}:{children:"expand_more"}))]}))})),e(p,{children:e("ul",{children:R})})]})),e("input",{type:"hidden",readOnly:!0,name:k,disabled:y,value:B}),(H=null,(m||g)&&B&&B.length?(m&&!g&&(H=t("button",u({type:"button","data-testid":j&&j["data-testid"]?"".concat(j["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(y?"_disabled":""),onClick:z},{children:[K(),e("span",u({className:"material-icons right"},{children:"close"}))]}))),g&&(H=t("button",u({type:"button","data-testid":j&&j["data-testid"]?"".concat(j["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(y?"_disabled":""),onClick:z},{children:["".concat(B.length," Options selected"),e("span",u({className:"material-icons right"},{children:"close"}))]}))),t("div",u({className:"select-bottom-container"},{children:[H,C&&t("p",u({className:"input-helper-text"},{children:[M&&e("span",u({className:"material-icons"},{children:M})),C]}))]}))):C&&t("p",u({className:"input-helper-text"},{children:[M&&e("span",u({className:"material-icons"},{children:M})),C]})))]}))}))},w=function(e){var t=e.children;return n.Children.toArray(t).every((function(e){return n.isValidElement(e)&&e.type===y}))?t:null},N=function(t){var n=t.children;return n?e("div",u({className:"filtered-search-top"},{children:n})):null},x=function(c){var l=c.children,d=c.openFilters,h=function(){var e=s(r(!1),2),t=e[0],n=e[1],c=s(r(!1),2),o=c[0],a=c[1],l=s(r(!1),2),u=l[0],d=l[1];return i((function(){var e=function(){window.innerWidth<=672?(n(!0),a(!1),d(!1)):window.innerWidth<=1024?(n(!1),a(!0),d(!1)):(n(!1),a(!1),d(!0))};return e(),function(){return e()}}),[]),{isMobile:t,isTablet:o,isDesktop:u}}().isMobile,f=s(r(!1),2),p=f[0],m=f[1],v=a((function(){return n.Children.toArray(l)}),[l]),g=o(null),b=o(null),y=0,x=null,C=function(e){if(g.current){var t=g.current.getBoundingClientRect();"left"===e?y-120<0?y=0:y-=120:y+120>t.width?y=t.width:y+=120,g.current.scrollTo({left:y,behavior:"smooth"})}},M=function(e){x=setTimeout((function(){g.current&&(g.current.scrollLeft=g.current.scrollLeft-y,requestAnimationFrame((function(){return M()})))}),300)};return i((function(){if(b.current&&g.current){var e=b.current,t=g.current,n=getComputedStyle(e).padding.split(" "),r=0;n.length>1&&(r=Number(n[n.length-1].replace(/px|rem|em/,""))),t.scrollWidth>e.clientWidth-2*r?m(!0):e.style.padding="16px 32px"}}),[d]),t("div",u({className:"filtered-search"},{children:[v.find((function(e){return n.isValidElement(e)&&e.type===N}))||null,d&&t("div",u({ref:b,className:"filtered-search-filter-container"},{children:[p&&!h&&e("button",u({type:"button",onClick:function(){return C("left")},className:"filtered-search-filter-navigation_left",onMouseDown:function(){return M()},onMouseUp:function(){return clearInterval(x)}},{children:e("span",u({className:"material-icons"},{children:"chevron_left"}))})),e("div",u({ref:g,className:"filtered-searc-filter-container-inner"},{children:v.find((function(e){return!(!n.isValidElement(e)||e.type!==w)&&e}))})),p&&!h&&e("button",u({type:"button",className:"filtered-search-filter-navigation_right",onMouseDown:function(){return M()},onMouseUp:function(){return clearTimeout(x)},onClick:function(){return C("right")}},{children:e("span",u({className:"material-icons"},{children:"chevron_right"}))}))]}))]}))};export{N as FilteredSearchTopSection,w as MoreFilters,x as default};
//# sourceMappingURL=index.esm.js.map
