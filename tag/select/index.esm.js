import{jsx as e,jsxs as t}from"react/jsx-runtime";import n,{useEffect as r,useContext as i,useState as c,useRef as o,useMemo as a}from"react";import l from"react-dom";var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};function u(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,c=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=c.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var p=n.memo((function(t){var i=t.children,c=t.className,o=t.disabled,a=u(t,["children","className","disabled"]),l=g(),s=l.onToggleMenu,h=l.setDropdownButtonDimensions,p=l.showMenu,f=n.useRef(null);return r((function(){if(f&&f.current){var e=f.current.getBoundingClientRect();e&&h({width:e.width,height:e.height})}}),[p]),e("div",d({className:"dropdown-button".concat(o?"_disabled":""," ").concat(c||""),onClick:s,ref:f},a,{children:i}))})),f=function(t){var i=t.className,c=t.children,o=u(t,["className","children"]),a=n.useRef(null),s=g(),h=s.showMenu,p=s.setDropdownMenuDimensions,f=s.position,m=s.dropdownRef,v=s.handleClickMenu;r((function(){if(a&&a.current){var e=a.current.getBoundingClientRect();e&&p({width:e.width,height:e.height})}}),[h]);var b=e("div",d({ref:a,className:"dropdown-menu ".concat(h?"":"hidden"," ").concat(i||""),style:f,onClick:v},o,{children:c}));if(m&&m.current){var y=document.getElementById("root");return l.createPortal(b,m.current||y||document.body)}return null},m=n.createContext({}),v=function(t){var n=t.children,i=t.className,l=t.onChangeToggleMenu,h=t.itemsDivider,p=t.forceRefresh,f=t.defaultShow,v=t.keepShown,g=void 0!==v&&v,b=t.placement,y=void 0===b?"bottom":b,w=u(t,["children","className","onChangeToggleMenu","itemsDivider","forceRefresh","defaultShow","keepShown","placement"]),x=s(c(!1),2),N=x[0],C=x[1],k=s(c(p||0),2),O=k[0],M=k[1],S=s(c({width:0,height:0}),2),D=S[0],R=S[1],j=s(c({width:0,height:0}),2),_=j[0],I=j[1],T=o(null);r((function(){void 0!==f&&f!==N&&C(f)}),[f]),r((function(){p&&O!==p&&M(p)}),[p,O]);var P=function(e){e&&e.target&&T&&T.current&&"true"===T.current.getAttribute("data-show")&&!T.current.contains(e.target)&&(C(!1),"function"==typeof l&&l(!1))};r((function(){return document.addEventListener("click",P),document.addEventListener("scroll",(function(){return M((function(e){return e++}))})),function(){document.removeEventListener("click",P),document.removeEventListener("scroll",(function(){return M((function(e){return e++}))}))}}),[]);var V=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},B=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},E=function(e,t){return"calc(".concat(e,"px + ").concat(t,"px + var(--unit))")},A=function(e,t){return"calc(".concat(e,"px - ").concat(t,"px - var(--unit))")},L=function(e){return"".concat(e,"px")},F=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},q=function(e){return"".concat(e,"px")},U=function(e,t,n){return"calc(".concat(e,"px + ").concat(n,"px - ").concat(t,"px)")},H=a((function(){var e,t="",n=0;if(T&&T.current){var r=T.current.getBoundingClientRect();n=D.width<_.width?_.width:D.width;var i=document.body,c=i.clientHeight,o=i.clientWidth;switch(y){case"top":t=r.top-D.height-8<0?B(r.top,_.height):V(r.top,D.height),e=r.left+n>o?F(r.left,n,_.width):L(r.left);break;case"right":e=r.left+n+8>o?A(r.left,n):E(r.left,_.width),t=r.top+D.height>c?U(r.top,D.height,_.height):q(r.top);break;case"bottom":t=r.top+D.height+8>c?V(r.top,D.height):B(r.top,_.height),e=r.left+n>o?F(r.left,n,_.width):L(r.left);break;case"left":e=r.left-n-8<0?E(r.left,_.width):A(r.left,n),t=r.top+D.height>c?U(r.top,D.height,_.height):q(r.top)}}return{left:e,top:t,width:"".concat(n,"px")}}),[D,_]);return e(m.Provider,d({value:{showMenu:N,setDropdownMenuDimensions:R,setDropdownButtonDimensions:I,handleClickMenu:function(){g||(C(!1),"function"==typeof l&&l(!1))},itemsDivider:h,dropdownRef:T,onChangeToggleMenu:l,onToggleMenu:function(){C((function(e){return"function"==typeof l&&l(!e),!e}))},position:H}},{children:e("div",d({ref:T,className:"dropdown ".concat(i||""),"data-show":N},w,{children:n}))}))},g=function(){return i(m)},b=function(n){var r=n.id,i=n.value,c=n.label,o=u(n,["id","value","label"]),a=x(),l=a.selectedValue,s=a.filterValue,h=a.multiple,p=a.onSelectItem,f=a.onRemoveItem,m=function(){if(l)return h?"object"==typeof l&&void 0!==l.find((function(e){return e===i})):l===i};return!s||c.toUpperCase().includes(s.toUpperCase())?h?t("li",d({className:"dropdown-item checkbox-container dropdown-item"},{children:[e("input",d({id:r||i,type:"checkbox",checked:m(),onChange:function(){m()?f(i):p(i)}},o)),e("label",d({htmlFor:r||i},{children:c}))]})):e("li",d({id:r,className:"dropdown-item ".concat(m()?"selected":""),onClick:function(){m()?f(i):p(i)}},o,{children:c})):null},y=n.createContext({}),w=function(i){var a=i.large,l=i.required,m=i.filter,g=i.multiple,b=i.disabled,w=i.error,x=i.label,N=i.placeholder,C=i.helperText,k=i.helperIcon,O=i.name,M=i.className,S=i.value,D=i.onChange,R=i.filterValue,j=i.onChangeFilter,_=i.children,I=u(i,["large","required","filter","multiple","disabled","error","label","placeholder","helperText","helperIcon","name","className","value","onChange","filterValue","onChangeFilter","children"]),T=o(),P=function(){return Array.isArray(S)&&g?S:"string"==typeof S||"number"==typeof S?g?[S]:S:g?[]:""},V=s(n.useState(P()),2),B=V[0],E=V[1],A=s(c(R||void 0),2),L=A[0],F=A[1],q=s(c(!1),2),U=q[0],H=q[1];r((function(){P()!==B&&E(P())}),[S]),r((function(){m&&"function"==typeof j&&R!==L&&F(R)}),[R]);var W,z=function(){g?(E([]),D&&D([])):(E(""),D&&D([]))},G=function(e){"function"==typeof j?j(e.target.value):F(e.target.value)},J=function(){"function"==typeof j?j(""):(T&&T.current&&(T.current.value=""),F(""))},K=function(){var t;if(g&&"object"==typeof B&&B.length)return e("span",d({className:"placeholder"},{children:"".concat(B.length," Options selected")}));if(B&&_){var n=_.find((function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.value)===B}));if(n)return null===(t=n.props)||void 0===t?void 0:t.label}return e("span",d({className:"placeholder"},{children:N}))};return e(y.Provider,d({value:{multiple:g,selectedValue:B,filterValue:L,onSelectItem:function(e){if(g){var t=B;t.some((function(t){return t===e}))||(t=h(h([],s(t),!1),[e],!1)),E(t),D&&D(t)}else E(e),D&&D(e)},onRemoveItem:function(e){var t;if(g){var n=B;"object"==typeof n&&(t=n&&n.length&&n.filter((function(t){return t!==e})))}else t="",D&&D("");E(t),D&&D(t)}}},{children:t("div",d({className:"input-wrapper".concat(b?"_disabled":""," ").concat(w?"error":"","  ").concat(M||"")},{children:[x&&t("label",d({className:"caption"},{children:[l&&e("small",{children:"*"}),x]})),t(v,d({onChangeToggleMenu:function(e){return H(e)},keepShown:g},{children:[e(p,d({"data-testid":I&&I["data-testid"]?I["data-testid"]:void 0,disabled:b},{children:t("div",d({className:"input-container"},m?{children:[e("input",{"data-testid":I&&I["data-testid"]?"".concat(I["data-testid"],"-input"):void 0,className:"input ".concat(a?"large":""),placeholder:B&&B.length&&g?"".concat(B.length," Options selected"):N,ref:T,type:"text",defaultValue:L,onChange:G,disabled:b}),e("span",L?d({"data-testid":I&&I["data-testid"]?"".concat(I["data-testid"],"-remove-filter-btn"):void 0,className:"material-icons input-icon-box",onClick:J},{children:"close"}):d({className:"material-icons input-icon-box"},{children:"search"}))]}:{children:[e("div",d({className:a?"input_large":"input"},{children:K()})),e("span",d({className:"material-icons input-icon-box"},U?{children:"expand_less"}:{children:"expand_more"}))]}))})),e(f,{children:e("ul",{children:_})})]})),e("input",{type:"hidden",readOnly:!0,name:O,disabled:b,value:B}),(W=null,(m||g)&&B&&B.length?(m&&!g&&(W=t("button",d({type:"button","data-testid":I&&I["data-testid"]?"".concat(I["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(b?"_disabled":""),onClick:z},{children:[K(),e("span",d({className:"material-icons right"},{children:"close"}))]}))),g&&(W=t("button",d({type:"button","data-testid":I&&I["data-testid"]?"".concat(I["data-testid"],"-remove-btn"):void 0,className:"chip_active".concat(b?"_disabled":""),onClick:z},{children:["".concat(B.length," Options selected"),e("span",d({className:"material-icons right"},{children:"close"}))]}))),t("div",d({className:"select-bottom-container"},{children:[W,C&&t("p",d({className:"input-helper-text"},{children:[k&&e("span",d({className:"material-icons"},{children:k})),C]}))]}))):C&&t("p",d({className:"input-helper-text"},{children:[k&&e("span",d({className:"material-icons"},{children:k})),C]})))]}))}))},x=function(){return i(y)};export{b as Option,w as default,x as useSelect};
//# sourceMappingURL=index.esm.js.map
